var ht=Object.defineProperty;var pt=(n,e,t)=>e in n?ht(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _=(n,e,t)=>(pt(n,typeof e!="symbol"?e+"":e,t),t);import{i as dt,f as ft,h as Pe,j as mt,s as Ee,e as ee,k as ie,l as le,m as Je,r as gt,n as $}from"../chunks/scheduler.1d9bef59.js";import{p as Se,t as W,b as qe,d as N,S as Fe,i as Ae,g,h as w,j as b,f as v,k as f,a as J,r as fe,u as me,v as ge,w as we,m as Q,s as T,n as Y,c as E,x as p,o as pe,z as te,y as M,A as oe,B as Ie,C as Te,D as Ke,e as We,E as lt,F as wt}from"../chunks/index.9450c740.js";import{g as Ue,a as Ze,l as $e,n as De,b as Oe,G as yt,f as ce,N as xe,c as Re,d as Qe,e as Ne,h as Ye,T as vt}from"../chunks/ThemeSwitcher.e3a6804d.js";function Be(n,e){const t=e.token={};function s(r,a,l,u){if(e.token!==t)return;e.resolved=u;let o=e.ctx;l!==void 0&&(o=o.slice(),o[l]=u);const i=r&&(e.current=r)(o);let h=!1;e.block&&(e.blocks?e.blocks.forEach((c,m)=>{m!==a&&c&&(Se(),W(c,1,1,()=>{e.blocks[m]===c&&(e.blocks[m]=null)}),qe())}):e.block.d(1),i.c(),N(i,1),i.m(e.mount(),e.anchor),h=!0),e.block=i,e.blocks&&(e.blocks[a]=i),h&&mt()}if(dt(n)){const r=ft();if(n.then(a=>{Pe(r),s(e.then,1,e.value,a),Pe(null)},a=>{if(Pe(r),s(e.catch,2,e.error,a),Pe(null),!e.hasCatch)throw a}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}function ct(n,e,t){const s=e.slice(),{resolved:r}=n;n.current===n.then&&(s[n.value]=r),n.current===n.catch&&(s[n.error]=r),n.block.p(s,t)}function Le(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class O{constructor(e){_(this,"api");this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,s=void 0){return await this.api.makeRequest("POST",e,t,s)}async putRequest(e,t,s=void 0){return await this.api.makeRequest("PUT",e,t,s)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let s of Object.getOwnPropertyNames(e))(e[s]||!e[s]&&typeof e[s]=="boolean")&&t.append(s,e[s].toString());return[...t].length>0?`?${t.toString()}`:""}}class kt extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${s}`)).albums}tracks(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`albums/${e}/tracks${a}`)}}class _t extends O{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,s,r,a){const l=this.paramsFor({include_groups:t,market:s,limit:r,offset:a});return this.getRequest(`artists/${e}/albums${l}`)}topTracks(e,t){const s=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${s}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class bt extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${s}`)).audiobooks}getAudiobookChapters(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`audiobooks/${e}/chapters${a}`)}}class Ct extends O{getCategories(e,t,s,r){const a=this.paramsFor({country:e,locale:t,limit:s,offset:r});return this.getRequest(`browse/categories${a}`)}getCategory(e,t,s){const r=this.paramsFor({country:t,locale:s});return this.getRequest(`browse/categories/${e}${r}`)}getNewReleases(e,t,s){const r=this.paramsFor({country:e,limit:t,offset:s});return this.getRequest(`browse/new-releases${r}`)}getFeaturedPlaylists(e,t,s,r,a){const l=this.paramsFor({country:e,locale:t,timestamp:s,limit:r,offset:a});return this.getRequest(`browse/featured-playlists${l}`)}getPlaylistsForCategory(e,t,s,r){const a=this.paramsFor({country:t,limit:s,offset:r});return this.getRequest(`browse/categories/${e}/playlists${a}`)}}class $t extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${s}`)).chapters}}class xt extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${s}`)).episodes}}class Rt extends O{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class Tt extends O{getAvailableMarkets(){return this.getRequest("markets")}}class Et extends O{getPlaybackState(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player${s}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player/currently-playing${s}`)}getRecentlyPlayedTracks(e,t){const s={limit:e};t&&(t.type==="before"?s.before=t.timestamp:t.type==="after"&&(s.after=t.timestamp));const r=this.paramsFor(s);return this.getRequest(`me/player/recently-played${r}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,s,r,a){const l=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${l}`,{context_uri:t,uris:s,offset:r,positionMs:a})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const s=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${s}`)}async setRepeatMode(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${s}`)}async setPlaybackVolume(e,t){const s=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${s}`)}async togglePlaybackShuffle(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${s}`)}async addItemToPlaybackQueue(e,t){const s=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${s}`)}}class St extends O{getPlaylist(e,t,s,r){const a=this.paramsFor({market:t,fields:s,additional_types:r});return this.getRequest(`playlists/${e}${a}`)}getPlaylistItems(e,t,s,r,a,l){const u=this.paramsFor({market:t,fields:s,limit:r,offset:a,additional_types:l});return this.getRequest(`playlists/${e}/tracks${u}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,s,r){return this.updatePlaylistItems(e,{range_start:t,range_length:s,insert_before:r})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,s){await this.postRequest(`playlists/${e}/tracks`,{position:s,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,s){const r=this.paramsFor({limit:t,offset:s});return this.getRequest(`users/${e}/playlists${r}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let s="";if(t instanceof Buffer)s=t.toString("base64");else if(t instanceof HTMLCanvasElement)s=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const a=r.getContext("2d");if(!a)throw new Error("Could not get canvas context");a.drawImage(t,0,0),s=r.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")s=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,s)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class qt extends O{async execute(e,t,s,r,a,l){const u=this.paramsFor({q:e,type:t,market:s,limit:r,offset:a,include_external:l});return await this.getRequest(`search${u}`)}}class Ft extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`shows/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${s}`)).shows}episodes(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`shows/${e}/episodes${a}`)}}class At extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${s}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const Ge={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0};class Pt extends O{profile(e){return this.getRequest(`users/${e}`)}}class It extends O{constructor(t){super(t);_(this,"albums");_(this,"audiobooks");_(this,"episodes");_(this,"playlists");_(this,"shows");_(this,"tracks");this.albums=new Ut(t),this.audiobooks=new Ot(t),this.episodes=new Lt(t),this.playlists=new Vt(t),this.shows=new Dt(t),this.tracks=new Nt(t)}profile(){return this.getRequest("me")}topItems(t,s,r,a){const l=this.paramsFor({time_range:s,limit:r,offset:a});return this.getRequest(`me/top/${t}${l}`)}followedArtists(t,s){const r=this.paramsFor({type:"artist",after:t,limit:s});return this.getRequest(`me/following${r}`)}async followArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.putRequest(`me/following${r}`,{ids:t})}async unfollowArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.deleteRequest(`me/following${r}`,{ids:t})}followsArtistsOrUsers(t,s){const r=this.paramsFor({ids:t,type:s});return this.getRequest(`me/following/contains${r}`)}}class Ut extends O{savedAlbums(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/albums${r}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class Ot extends O{savedAudiobooks(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${s}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class Lt extends O{savedEpisodes(e,t,s){const r=this.paramsFor({market:e,limit:t,offset:s});return this.getRequest(`me/episodes${r}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class Vt extends O{playlists(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${s}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const s=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${s}`)}}class Dt extends O{savedShows(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${s}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const s=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${s}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class Nt extends O{savedTracks(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/tracks${r}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class Bt{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class Z{static async refreshCachedAccessToken(e,t){const s=await Z.refreshToken(e,t.refresh_token);return Z.toCachable(s)}static toCachable(e){return{...e,expires:Date.now()+e.expires_in*1e3}}static async refreshToken(e,t){const s=new URLSearchParams;s.append("client_id",e),s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to refresh token: ${r.statusText}, ${a}`);return JSON.parse(a)}static generateCodeVerifier(e){let t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),s=await Bt.current.subtle.digest("SHA-256",t),r=[...new Uint8Array(s)];return(typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}static get crypto(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}const ye=class ye{constructor(e,t,s=[]){_(this,"clientId");_(this,"clientSecret");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.clientSecret=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ye.cacheKey,async()=>{const t=await this.getTokenFromApi();return Z.toCachable(t)})}async getAccessToken(){return await this.cache.get(ye.cacheKey)}removeAccessToken(){this.cache.remove(ye.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(o=>o+"="+e[o]).join("&"),s=typeof Buffer<"u",r=`${this.clientId}:${this.clientSecret}`,a=s?Buffer.from(r).toString("base64"):btoa(r),l=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${a}`},body:t});if(l.status!==200)throw new Error("Failed to get access token.");return await l.json()}};_(ye,"cacheKey","spotify-sdk:ClientCredentialsStrategy:token");let je=ye;const ve=class ve{constructor(e,t,s){_(this,"clientId");_(this,"redirectUri");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ve.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return Z.toCachable(t)},async t=>Z.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ve.cacheKey)}removeAccessToken(){this.cache.remove(ve.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var r=(this.scopes??[]).join(" ");const a=new URLSearchParams;a.append("client_id",this.clientId),a.append("response_type","token"),a.append("redirect_uri",this.redirectUri),a.append("scope",r);const l="https://accounts.spotify.com/authorize?"+a.toString();return this.configuration.redirectionStrategy.redirect(l),Ge}};_(ve,"cacheKey","spotify-sdk:ImplicitGrantStrategy:token");let Me=ve;const ke=class ke{constructor(e,t,s){_(this,"clientId");_(this,"redirectUri");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ke.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return Z.toCachable(t)},async t=>Z.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ke.cacheKey)}removeAccessToken(){this.cache.remove(ke.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(!t){const a=Z.generateCodeVerifier(128),l=await Z.generateCodeChallenge(a),u={verifier:a,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",u);const o=await this.generateRedirectUrlForUser(this.scopes,l);return await this.configuration.redirectionStrategy.redirect(o),Ge}this.removeCodeFromUrl();const s=await this.cache.get("spotify-sdk:verifier"),r=s==null?void 0:s.verifier;if(!r)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(t,r)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const s=e.join(" "),r=new URLSearchParams;return r.append("client_id",this.clientId),r.append("response_type","code"),r.append("redirect_uri",this.redirectUri),r.append("scope",s),r.append("code_challenge_method","S256"),r.append("code_challenge",t),`https://accounts.spotify.com/authorize?${r.toString()}`}async exchangeCodeForToken(e,t){const s=new URLSearchParams;s.append("client_id",this.clientId),s.append("grant_type","authorization_code"),s.append("code",e),s.append("redirect_uri",this.redirectUri),s.append("code_verifier",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to exchange code for token: ${r.statusText}, ${a}`);return JSON.parse(a)}};_(ke,"cacheKey","spotify-sdk:AuthorizationCodeWithPKCEStrategy:token");let Ve=ke;class jt{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class Mt{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const s=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${s}`)}}}}class Ht{async handleErrors(e){return!1}}class zt{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class ut{constructor(e,t=new Map,s=0,r=2*60*1e3){_(this,"storage");_(this,"updateFunctions");_(this,"autoRenewInterval");_(this,"autoRenewWindow");this.storage=e,this.updateFunctions=t,this.autoRenewInterval=s,this.autoRenewWindow=r,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,s){s&&this.updateFunctions.set(e,s);const r=await this.get(e);if(r)return r;const a=await t();if(!a)throw new Error("Could not create cache item");return this.setCacheItem(e,a),a}async get(e){let t=this.storage.get(e),s=t?JSON.parse(t):null;if(this.itemDueToExpire(s)&&this.updateFunctions.has(e)){const r=this.updateFunctions.get(e);await this.tryUpdateItem(e,s,r),t=this.storage.get(e),s=t?JSON.parse(t):null}return s?s.expires&&(s.expires===-1||s.expires<=Date.now())?(this.remove(e),null):(s.expiresOnAccess&&s.expiresOnAccess===!0&&this.remove(e),s):null}set(e,t,s){const r=Date.now()+s,a={...t,expires:r};this.setCacheItem(e,a)}setCacheItem(e,t){const s=JSON.stringify(t);this.storage.set(e,s)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const s=await this.get(t);s&&e&&this.itemDueToExpire(s)&&await this.tryUpdateItem(t,s,e)})}async tryUpdateItem(e,t,s){try{const r=await s(t);r&&this.setCacheItem(e,r)}catch(r){console.error(r)}}}class Gt extends ut{constructor(){super(new Jt)}}class Jt{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class Kt extends ut{constructor(){super(new Wt)}}class Wt{constructor(){_(this,"cache",new Map)}get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}const _e=class _e{constructor(e,t){_(this,"clientId");_(this,"accessToken");_(this,"configuration",null);this.clientId=e,this.accessToken=t}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return this.accessToken=await this.cache.getOrCreate(_e.cacheKey,async()=>{const e=Z.toCachable(this.accessToken);return Promise.resolve(e)},async e=>Z.refreshCachedAccessToken(this.clientId,e)),this.accessToken}async getAccessToken(){return await this.cache.get(_e.cacheKey)}removeAccessToken(){this.cache.remove(_e.cacheKey)}};_(_e,"cacheKey","spotify-sdk:ProvidedAccessTokenStrategy:token");let He=_e;const ne=class ne{constructor(e,t){_(this,"sdkConfig");_(this,"authenticationStrategy");_(this,"albums");_(this,"artists");_(this,"audiobooks");_(this,"browse");_(this,"chapters");_(this,"episodes");_(this,"recommendations");_(this,"markets");_(this,"player");_(this,"playlists");_(this,"shows");_(this,"tracks");_(this,"users");_(this,"search");_(this,"currentUser");this.sdkConfig=this.initilizeSdk(t),this.albums=new kt(this),this.artists=new _t(this),this.audiobooks=new bt(this),this.browse=new Ct(this),this.chapters=new $t(this),this.episodes=new xt(this),this.recommendations=new Rt(this),this.markets=new Tt(this),this.player=new Et(this),this.playlists=new St(this),this.shows=new Ft(this),this.tracks=new At(this),this.users=new Pt(this),this.currentUser=new It(this);const s=new qt(this);this.search=s.execute.bind(s),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,s=void 0,r=void 0){try{const a=await this.authenticationStrategy.getOrCreateAccessToken(),l=a==null?void 0:a.access_token,u=ne.rootUrl+t,o={method:e,headers:{Authorization:`Bearer ${l}`,"Content-Type":r??"application/json"},body:s?typeof s=="string"?s:JSON.stringify(s):void 0};this.sdkConfig.beforeRequest(u,o);const i=await this.sdkConfig.fetch(u,o);return this.sdkConfig.afterRequest(u,o,i),i.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(i),this.sdkConfig.deserializer.deserialize(i))}catch(a){if(!await this.sdkConfig.errorHandler.handleErrors(a))throw a;return null}}initilizeSdk(e){const t=typeof window<"u";return{...{fetch:(r,a)=>fetch(r,a),beforeRequest:(r,a)=>{},afterRequest:(r,a,l)=>{},deserializer:new jt,responseValidator:new Mt,errorHandler:new Ht,redirectionStrategy:new zt,cachingStrategy:t?new Gt:new Kt},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){return this.authenticationStrategy.getOrCreateAccessToken()}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,s=[],r){const a=new Ve(e,t,s);return new ne(a,r)}static withClientCredentials(e,t,s=[],r){const a=new je(e,t,s);return new ne(a,r)}static withImplicitGrant(e,t,s=[],r){const a=new Me(e,t,s);return new ne(a,r)}static withAccessToken(e,t,s){const r=new He(e,t);return new ne(r,s)}static async performUserAuthorization(e,t,s,r,a){const l=new Ve(e,t,s),o=await new ne(l,a).authenticationStrategy.getOrCreateAccessToken();if(JSON.stringify({...o,expires:0})!==JSON.stringify(Ge)){if(typeof r=="string"){await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return}await r(o)}}};_(ne,"rootUrl","https://api.spotify.com/v1/");let ze=ne;function Zt(n){let e,t,s;return t=new yt({props:{data:n[0],nodeStyle:n[2]}}),{c(){e=g("div"),fe(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=b(e);me(t.$$.fragment,a),a.forEach(v),this.h()},h(){f(e,"class","w-full h-full z-0")},m(r,a){J(r,e,a),ge(t,e,null),s=!0},p(r,a){const l={};a&1&&(l.data=r[0]),a&4&&(l.nodeStyle=r[2]),t.$set(l)},i(r){s||(N(t.$$.fragment,r),s=!0)},o(r){W(t.$$.fragment,r),s=!1},d(r){r&&v(e),we(t)}}}function Qt(n){let e,t,s,r=n[1].text+"",a,l,u,o,i,h;return{c(){e=g("div"),t=g("div"),s=g("p"),a=Q(r),l=T(),u=g("progress"),this.h()},l(c){e=w(c,"DIV",{class:!0});var m=b(e);t=w(m,"DIV",{class:!0});var d=b(t);s=w(d,"P",{class:!0});var y=b(s);a=Y(y,r),y.forEach(v),l=E(d),u=w(d,"PROGRESS",{class:!0,max:!0}),b(u).forEach(v),d.forEach(v),m.forEach(v),this.h()},h(){f(s,"class","text-lg font-bold"),f(u,"class","progress w-56"),u.value=o=n[1].percentage,f(u,"max","100"),f(t,"class","text-center space-y-3"),f(e,"class","absolute top-0 left-0 z-10 w-screen h-screen flex justify-center items-center bg-base-100")},m(c,m){J(c,e,m),p(e,t),p(t,s),p(s,a),p(t,l),p(t,u),h=!0},p(c,m){(!h||m&2)&&r!==(r=c[1].text+"")&&pe(a,r),(!h||m&2&&o!==(o=c[1].percentage))&&(u.value=o)},i(c){h||(c&&le(()=>{h&&(i||(i=te(e,ce,{delay:100,duration:500},!0)),i.run(1))}),h=!0)},o(c){c&&(i||(i=te(e,ce,{delay:100,duration:500},!1)),i.run(0)),h=!1},d(c){c&&v(e),c&&i&&i.end()}}}function Yt(n){let e,t,s,r;const a=[Qt,Zt],l=[];function u(o,i){return o[1]?0:1}return t=u(n),s=l[t]=a[t](n),{c(){e=g("div"),s.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=b(e);s.l(i),i.forEach(v),this.h()},h(){f(e,"class","relative")},m(o,i){J(o,e,i),l[t].m(e,null),r=!0},p(o,[i]){let h=t;t=u(o),t===h?l[t].p(o,i):(Se(),W(l[h],1,1,()=>{l[h]=null}),qe(),s=l[t],s?s.p(o,i):(s=l[t]=a[t](o),s.c()),N(s,1),s.m(e,null))},i(o){r||(N(s),r=!0)},o(o){W(s),r=!1},d(o){o&&v(e),l[t].d()}}}function Xt(n,e,t){let s,r,a,l;ee(n,Ue,m=>t(4,s=m)),ee(n,Ze,m=>t(0,r=m)),ee(n,$e,m=>t(1,a=m)),ee(n,De,m=>t(2,l=m));let{sdk:u}=e;const o=async m=>{const d=m.map(S=>S.id),y=80/d.length;let k=[];for(const S of m){const A=await u.artists.relatedArtists(S.id);a&&ie($e,a.percentage+=y,a);for(const P of A.artists)d.includes(P.id)&&!k.includes({source:P.id,target:S.id})&&!k.includes({source:S.id,target:P.id})&&k.push({source:S.id,target:P.id})}return k},i=async m=>{var y,k;const d=(await u.currentUser.followedArtists(m,50)).artists;return(y=d==null?void 0:d.cursors)!=null&&y.after?d.items.concat(await i((k=d==null?void 0:d.cursors)==null?void 0:k.after)):d.items},h=async(m="short")=>{switch(m){case"short_term":case"medium_term":case"long_term":return(await u.currentUser.topItems("artists",m,50)).items;case"following":return await i();case"all":return(await h("short_term")).concat(await h("medium_term")).concat(await h("long_term")).concat(await h("following"));default:return h("medium_term")}},c=async m=>{try{ie($e,a={text:"Downloading Artists",percentage:10},a);const d=await h(m);ie($e,a={text:"Building Links",percentage:20},a);const y=await o(d);ie($e,a=null,a),ie(Ze,r={nodes:d,links:y},r)}catch(d){ie(Ue,s=d,s)}};return Oe.subscribe(c),n.$$set=m=>{"sdk"in m&&t(3,u=m.sdk)},[r,a,l,u]}class es extends Fe{constructor(e){super(),Ae(this,e,Xt,Yt,Ee,{sdk:3})}}function ts(n){let e,t=n[0].display_name+"",s;return{c(){e=g("span"),s=Q(t)},l(r){e=w(r,"SPAN",{});var a=b(e);s=Y(a,t),a.forEach(v)},m(r,a){J(r,e,a),p(e,s)},p(r,a){a&1&&t!==(t=r[0].display_name+"")&&pe(s,t)},d(r){r&&v(e)}}}function ss(n){let e,t;return{c(){e=g("img"),this.h()},l(s){e=w(s,"IMG",{src:!0,alt:!0}),this.h()},h(){var s;Je(e.src,t=(s=n[0].images)==null?void 0:s.slice(-1)[0].url)||f(e,"src",t),f(e,"alt","profile")},m(s,r){J(s,e,r)},p(s,r){var a;r&1&&!Je(e.src,t=(a=s[0].images)==null?void 0:a.slice(-1)[0].url)&&f(e,"src",t)},d(s){s&&v(e)}}}function rs(n){let e,t,s,r,a,l,u;function o(c,m){var d,y;return((y=(d=c[0])==null?void 0:d.images)==null?void 0:y.length)>0?ss:ts}let i=o(n),h=i(n);return{c(){e=g("div"),t=g("div"),s=g("a"),h.c(),this.h()},l(c){e=w(c,"DIV",{class:!0,"data-tip":!0});var m=b(e);t=w(m,"DIV",{class:!0});var d=b(t);s=w(d,"A",{class:!0,href:!0,target:!0,rel:!0});var y=b(s);h.l(y),y.forEach(v),d.forEach(v),m.forEach(v),this.h()},h(){f(s,"class","w-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2 overflow-hidden"),f(s,"href",r=n[0].external_urls.spotify),f(s,"target","_blank"),f(s,"rel","noreferrer noopener"),f(t,"class","avatar"),f(e,"class","tooltip tooltip-bottom select-none"),f(e,"data-tip",a=n[0].display_name)},m(c,m){J(c,e,m),p(e,t),p(t,s),h.m(s,null),u=!0},p(c,[m]){i===(i=o(c))&&h?h.p(c,m):(h.d(1),h=i(c),h&&(h.c(),h.m(s,null))),(!u||m&1&&r!==(r=c[0].external_urls.spotify))&&f(s,"href",r),(!u||m&1&&a!==(a=c[0].display_name))&&f(e,"data-tip",a)},i(c){u||(c&&le(()=>{u&&(l||(l=te(e,ce,{duration:400},!0)),l.run(1))}),u=!0)},o(c){c&&(l||(l=te(e,ce,{duration:400},!1)),l.run(0)),u=!1},d(c){c&&v(e),h.d(),c&&l&&l.end()}}}function as(n,e,t){let{profile:s}=e;return n.$$set=r=>{"profile"in r&&t(0,s=r.profile)},[s]}class ns extends Fe{constructor(e){super(),Ae(this,e,as,rs,Ee,{profile:0})}}function Xe(n){let e,t,s,r,a="Color by Popularity",l,u,o,i,h,c,m,d=n[3]&&et();return{c(){e=g("div"),t=g("div"),s=g("label"),r=g("span"),r.textContent=a,l=T(),u=g("input"),o=T(),d&&d.c(),this.h()},l(y){e=w(y,"DIV",{class:!0});var k=b(e);t=w(k,"DIV",{class:!0});var S=b(t);s=w(S,"LABEL",{class:!0});var A=b(s);r=w(A,"SPAN",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-1w1k44k"&&(r.textContent=a),l=E(A),u=w(A,"INPUT",{type:!0,class:!0}),A.forEach(v),S.forEach(v),o=E(k),d&&d.l(k),k.forEach(v),this.h()},h(){f(r,"class","label-text"),f(u,"type","checkbox"),f(u,"class","checkbox"),f(s,"class","label cursor-pointer"),f(t,"class","form-control"),f(e,"class","flex flex-col")},m(y,k){J(y,e,k),p(e,t),p(t,s),p(s,r),p(s,l),p(s,u),u.checked=n[3],p(e,o),d&&d.m(e,null),h=!0,c||(m=Te(u,"change",n[6]),c=!0)},p(y,k){k&8&&(u.checked=y[3]),y[3]?d?k&8&&N(d,1):(d=et(),d.c(),N(d,1),d.m(e,null)):d&&(Se(),W(d,1,1,()=>{d=null}),qe())},i(y){h||(N(d),y&&le(()=>{h&&(i||(i=te(e,ce,{},!0)),i.run(1))}),h=!0)},o(y){W(d),y&&(i||(i=te(e,ce,{},!1)),i.run(0)),h=!1},d(y){y&&v(e),d&&d.d(),y&&i&&i.end(),c=!1,m()}}}function et(n){let e,t='<p class="text-left">Less Popular</p> <p class="text-right">More Popular</p>',s,r;return{c(){e=g("div"),e.innerHTML=t,this.h()},l(a){e=w(a,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-17ane3m"&&(e.innerHTML=t),this.h()},h(){f(e,"class","inline-grid mx-1 flex-grow grid-cols-2 px-3 py-1 text-xs md:text-base text-white rounded-md shadow-md bg-gradient-to-r from-[#15803d] via-[#7e22ce] to-[#be185d]")},m(a,l){J(a,e,l),r=!0},i(a){r||(a&&le(()=>{r&&(s||(s=te(e,Ne,{y:-4},!0)),s.run(1))}),r=!0)},o(a){a&&(s||(s=te(e,Ne,{y:-4},!1)),s.run(0)),r=!1},d(a){a&&v(e),a&&s&&s.end()}}}function os(n){let e,t,s,r,a,l="Preferences",u,o,i,h="Top of The Past Month",c,m="Top of The Past Year",d,y="Top of All Time",k,S="Following",A,P="All Available",H,x,C,q="View as Dots",R,z="View as Pictures",U,B="View as Names",ue,se,I,G,L,V="Log Out",re,X,be='<i>© 2023 Grant Handy · <a href="/LICENSE.txt" class="link" target="_blank" rel="noreferrer noopener">License</a></i>',de,Ce,F=n[2]!=xe.Picture&&Xe(n);return{c(){e=g("div"),t=g("label"),s=T(),r=g("div"),a=g("h1"),a.textContent=l,u=T(),o=g("select"),i=g("option"),i.textContent=h,c=g("option"),c.textContent=m,d=g("option"),d.textContent=y,k=g("option"),k.textContent=S,A=g("option"),A.textContent=P,H=T(),x=g("select"),C=g("option"),C.textContent=q,R=g("option"),R.textContent=z,U=g("option"),U.textContent=B,ue=T(),F&&F.c(),se=T(),I=g("div"),G=T(),L=g("button"),L.textContent=V,re=T(),X=g("p"),X.innerHTML=be,this.h()},l(j){e=w(j,"DIV",{class:!0});var K=b(e);t=w(K,"LABEL",{for:!0,class:!0}),b(t).forEach(v),s=E(K),r=w(K,"DIV",{class:!0});var D=b(r);a=w(D,"H1",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-n7an2l"&&(a.textContent=l),u=E(D),o=w(D,"SELECT",{class:!0});var ae=b(o);i=w(ae,"OPTION",{"data-svelte-h":!0}),M(i)!=="svelte-18ovyn3"&&(i.textContent=h),c=w(ae,"OPTION",{"data-svelte-h":!0}),M(c)!=="svelte-1s4lgcp"&&(c.textContent=m),d=w(ae,"OPTION",{"data-svelte-h":!0}),M(d)!=="svelte-t59ye6"&&(d.textContent=y),k=w(ae,"OPTION",{"data-svelte-h":!0}),M(k)!=="svelte-1utbkqg"&&(k.textContent=S),A=w(ae,"OPTION",{"data-svelte-h":!0}),M(A)!=="svelte-1p6vrpt"&&(A.textContent=P),ae.forEach(v),H=E(D),x=w(D,"SELECT",{class:!0});var he=b(x);C=w(he,"OPTION",{"data-svelte-h":!0}),M(C)!=="svelte-1ru6mvb"&&(C.textContent=q),R=w(he,"OPTION",{"data-svelte-h":!0}),M(R)!=="svelte-hpqvnh"&&(R.textContent=z),U=w(he,"OPTION",{"data-svelte-h":!0}),M(U)!=="svelte-1arngzx"&&(U.textContent=B),he.forEach(v),ue=E(D),F&&F.l(D),se=E(D),I=w(D,"DIV",{class:!0}),b(I).forEach(v),G=E(D),L=w(D,"BUTTON",{class:!0,"data-svelte-h":!0}),M(L)!=="svelte-11tytfz"&&(L.textContent=V),re=E(D),X=w(D,"P",{class:!0,"data-svelte-h":!0}),M(X)!=="svelte-g4e2e5"&&(X.innerHTML=be),D.forEach(v),K.forEach(v),this.h()},h(){f(t,"for","my-drawer"),f(t,"class","drawer-overlay"),f(a,"class","text-xl"),i.__value=Re.ShortTerm,oe(i,i.__value),c.__value=Re.MediumTerm,oe(c,c.__value),d.__value=Re.LongTerm,oe(d,d.__value),k.__value=Re.Following,oe(k,k.__value),A.__value=Re.All,oe(A,A.__value),f(o,"class","select select-bordered w-full"),n[1]===void 0&&le(()=>n[4].call(o)),C.__value=xe.Dot,oe(C,C.__value),R.__value=xe.Picture,oe(R,R.__value),U.__value=xe.Text,oe(U,U.__value),f(x,"class","select select-bordered w-full"),n[2]===void 0&&le(()=>n[5].call(x)),f(I,"class","flex-grow"),f(L,"class","btn btn-primary"),f(X,"class","text-xs text-center"),f(r,"class","menu p-4 w-64 md:w-80 h-full bg-base-200 text-base-content space-y-2 flex flex-col bg-secondary-content"),f(e,"class","drawer-side z-50")},m(j,K){J(j,e,K),p(e,t),p(e,s),p(e,r),p(r,a),p(r,u),p(r,o),p(o,i),p(o,c),p(o,d),p(o,k),p(o,A),Ie(o,n[1],!0),p(r,H),p(r,x),p(x,C),p(x,R),p(x,U),Ie(x,n[2],!0),p(r,ue),F&&F.m(r,null),p(r,se),p(r,I),p(r,G),p(r,L),p(r,re),p(r,X),de||(Ce=[Te(o,"change",n[4]),Te(x,"change",n[5]),Te(L,"click",n[7])],de=!0)},p(j,[K]){K&2&&Ie(o,j[1]),K&4&&Ie(x,j[2]),j[2]!=xe.Picture?F?(F.p(j,K),K&4&&N(F,1)):(F=Xe(j),F.c(),N(F,1),F.m(r,se)):F&&(Se(),W(F,1,1,()=>{F=null}),qe())},i(j){N(F)},o(j){W(F)},d(j){j&&v(e),F&&F.d(),de=!1,gt(Ce)}}}function is(n,e,t){let s,r,a;ee(n,Oe,c=>t(1,s=c)),ee(n,De,c=>t(2,r=c)),ee(n,Qe,c=>t(3,a=c));let{sdk:l}=e;function u(){s=Ke(this),Oe.set(s)}function o(){r=Ke(this),De.set(r)}function i(){a=this.checked,Qe.set(a)}const h=()=>{l.logOut(),localStorage.clear(),window.location.href="/"};return n.$$set=c=>{"sdk"in c&&t(0,l=c.sdk)},[l,s,r,a,u,o,i,h]}class ls extends Fe{constructor(e){super(),Ae(this,e,is,os,Ee,{sdk:0})}}function tt(n,e,t){const s=n.slice();return s[6]=e[t],s}function st(n,e,t){const s=n.slice();return s[9]=e[t],s}function rt(n){let e,t,s,r,a,l,u,o=n[0].name+"",i,h,c,m,d,y,k,S,A,P,H,x,C=n[0].popularity+"",q,R,z,U,B,ue,se,I=n[0].genres.length>0&&at(n),G={ctx:n,current:null,token:null,hasCatch:!1,pending:hs,then:us,catch:cs,value:5};return Be(S=n[1](n[0]),G),{c(){e=g("div"),t=g("input"),s=T(),r=g("div"),a=g("div"),l=g("div"),u=g("h2"),i=Q(o),c=T(),m=g("div"),d=g("div"),y=g("div"),I&&I.c(),k=T(),G.block.c(),A=T(),P=g("div"),H=g("p"),x=Q("Popularity: "),q=Q(C),R=Q("%"),z=T(),U=g("p"),B=g("a"),ue=Q("Visit"),this.h()},l(L){e=w(L,"DIV",{class:!0});var V=b(e);t=w(V,"INPUT",{type:!0}),s=E(V),r=w(V,"DIV",{class:!0});var re=b(r);a=w(re,"DIV",{class:!0,style:!0});var X=b(a);l=w(X,"DIV",{class:!0});var be=b(l);u=w(be,"H2",{class:!0});var de=b(u);i=Y(de,o),de.forEach(v),be.forEach(v),X.forEach(v),re.forEach(v),c=E(V),m=w(V,"DIV",{class:!0});var Ce=b(m);d=w(Ce,"DIV",{class:!0});var F=b(d);y=w(F,"DIV",{class:!0});var j=b(y);I&&I.l(j),k=E(j),G.block.l(j),j.forEach(v),A=E(F),P=w(F,"DIV",{class:!0});var K=b(P);H=w(K,"P",{class:!0});var D=b(H);x=Y(D,"Popularity: "),q=Y(D,C),R=Y(D,"%"),D.forEach(v),z=E(K),U=w(K,"P",{class:!0});var ae=b(U);B=w(ae,"A",{href:!0,class:!0,target:!0,rel:!0});var he=b(B);ue=Y(he,"Visit"),he.forEach(v),ae.forEach(v),K.forEach(v),F.forEach(v),Ce.forEach(v),V.forEach(v),this.h()},h(){var L;f(t,"type","checkbox"),f(u,"class","card-title text-left"),f(l,"class","backdrop-brightness-50 p-4 w-full space-y-2 flex items-center"),f(a,"class","rounded-t-xl w-full text-white bg-cover bg-center"),f(a,"style",h=`background-image: url(${(L=n[0].images[0])==null?void 0:L.url})`),f(r,"class","collapse-title p-0"),f(y,"class","space-y-2"),f(H,"class","text-left float-left"),f(B,"href",se=n[0].external_urls.spotify),f(B,"class","link"),f(B,"target","_blank"),f(B,"rel","noreferrer noopener"),f(U,"class","text-right float-right"),f(P,"class","w-full flow-root"),f(d,"class","pt-3 text-xs md:text-sm space-y-3"),f(m,"class","collapse-content"),f(e,"class","z-20 absolute top-4 left-4 w-48 md:w-64 collapse shadow-2xl rounded-xl bg-neutral text-neutral-content")},m(L,V){J(L,e,V),p(e,t),p(e,s),p(e,r),p(r,a),p(a,l),p(l,u),p(u,i),p(e,c),p(e,m),p(m,d),p(d,y),I&&I.m(y,null),p(y,k),G.block.m(y,G.anchor=null),G.mount=()=>y,G.anchor=null,p(d,A),p(d,P),p(P,H),p(H,x),p(H,q),p(H,R),p(P,z),p(P,U),p(U,B),p(B,ue)},p(L,V){var re;n=L,V&1&&o!==(o=n[0].name+"")&&pe(i,o),V&1&&h!==(h=`background-image: url(${(re=n[0].images[0])==null?void 0:re.url})`)&&f(a,"style",h),n[0].genres.length>0?I?I.p(n,V):(I=at(n),I.c(),I.m(y,k)):I&&(I.d(1),I=null),G.ctx=n,V&1&&S!==(S=n[1](n[0]))&&Be(S,G)||ct(G,n,V),V&1&&C!==(C=n[0].popularity+"")&&pe(q,C),V&1&&se!==(se=n[0].external_urls.spotify)&&f(B,"href",se)},d(L){L&&v(e),I&&I.d(),G.block.d(),G.token=null,G=null}}}function at(n){let e,t,s="Genres",r,a,l=Le(n[0].genres.slice(0,8)),u=[];for(let o=0;o<l.length;o+=1)u[o]=nt(st(n,l,o));return{c(){e=g("div"),t=g("h3"),t.textContent=s,r=T(),a=g("ol");for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){e=w(o,"DIV",{});var i=b(e);t=w(i,"H3",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1epgqft"&&(t.textContent=s),r=E(i),a=w(i,"OL",{class:!0});var h=b(a);for(let c=0;c<u.length;c+=1)u[c].l(h);h.forEach(v),i.forEach(v),this.h()},h(){f(t,"class","text-sm md:text-lg font-semibold ml-1"),f(a,"class","list-disc ml-3")},m(o,i){J(o,e,i),p(e,t),p(e,r),p(e,a);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(a,null)},p(o,i){if(i&1){l=Le(o[0].genres.slice(0,8));let h;for(h=0;h<l.length;h+=1){const c=st(o,l,h);u[h]?u[h].p(c,i):(u[h]=nt(c),u[h].c(),u[h].m(a,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}},d(o){o&&v(e),lt(u,o)}}}function nt(n){let e,t=n[9]+"",s;return{c(){e=g("li"),s=Q(t)},l(r){e=w(r,"LI",{});var a=b(e);s=Y(a,t),a.forEach(v)},m(r,a){J(r,e,a),p(e,s)},p(r,a){a&1&&t!==(t=r[9]+"")&&pe(s,t)},d(r){r&&v(e)}}}function cs(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function us(n){let e,t,s="Top Tracks",r,a,l,u=Le(n[5]),o=[];for(let i=0;i<u.length;i+=1)o[i]=ot(tt(n,u,i));return{c(){e=g("div"),t=g("h3"),t.textContent=s,r=T(),a=g("ol");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=w(i,"DIV",{});var h=b(e);t=w(h,"H3",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1fltes8"&&(t.textContent=s),r=E(h),a=w(h,"OL",{class:!0});var c=b(a);for(let m=0;m<o.length;m+=1)o[m].l(c);c.forEach(v),h.forEach(v),this.h()},h(){f(t,"class","text-sm md:text-lg font-semibold ml-1"),f(a,"class","list-decimal ml-3")},m(i,h){J(i,e,h),p(e,t),p(e,r),p(e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(a,null)},p(i,h){if(h&3){u=Le(i[5]);let c;for(c=0;c<u.length;c+=1){const m=tt(i,u,c);o[c]?o[c].p(m,h):(o[c]=ot(m),o[c].c(),o[c].m(a,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=u.length}},i(i){i&&(l||le(()=>{l=wt(e,Ne,{y:-2}),l.start()}))},o:$,d(i){i&&v(e),lt(o,i)}}}function ot(n){let e,t,s=n[6].name+"",r,a,l,u;return{c(){e=g("li"),t=g("a"),r=Q(s),a=Q(" ►"),u=T(),this.h()},l(o){e=w(o,"LI",{class:!0});var i=b(e);t=w(i,"A",{href:!0,target:!0,rel:!0});var h=b(t);r=Y(h,s),a=Y(h," ►"),h.forEach(v),u=E(i),i.forEach(v),this.h()},h(){f(t,"href",l=n[6].external_urls.spotify),f(t,"target","_blank"),f(t,"rel","noreferrer noopener"),f(e,"class","link")},m(o,i){J(o,e,i),p(e,t),p(t,r),p(t,a),p(e,u)},p(o,i){i&1&&s!==(s=o[6].name+"")&&pe(r,s),i&1&&l!==(l=o[6].external_urls.spotify)&&f(t,"href",l)},d(o){o&&v(e)}}}function hs(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function ps(n){let e,t=n[0]&&rt(n);return{c(){t&&t.c(),e=We()},l(s){t&&t.l(s),e=We()},m(s,r){t&&t.m(s,r),J(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=rt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(s){s&&v(e),t&&t.d(s)}}}function ds(n,e,t){let s,r;ee(n,Ye,o=>t(0,s=o)),ee(n,Oe,o=>t(3,r=o));let{sdk:a}=e,l=[];const u=async o=>{if(l.filter(i=>i.id===o.id).length>0)return l.filter(i=>i.id===o.id)[0].top;{const i=await a.artists.topTracks(o.id,"US").then(h=>h.tracks);return l.push({id:o.id,top:i}),i}};return n.$$set=o=>{"sdk"in o&&t(2,a=o.sdk)},n.$$.update=()=>{n.$$.dirty&8&&r&&ie(Ye,s=null,s)},[s,u,a,r]}class fs extends Fe{constructor(e){super(),Ae(this,e,ds,ps,Ee,{sdk:2})}}function ms(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function gs(n){let e,t;return e=new ns({props:{profile:n[3]}}),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,r){ge(e,s,r),t=!0},p:$,i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function ws(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function it(n){let e,t,s,r="Error:",a,l,u,o,i='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h,c,m,d;return{c(){e=g("div"),t=g("span"),s=g("span"),s.textContent=r,a=T(),l=Q(n[0]),u=T(),o=g("button"),o.innerHTML=i,this.h()},l(y){e=w(y,"DIV",{class:!0});var k=b(e);t=w(k,"SPAN",{class:!0});var S=b(t);s=w(S,"SPAN",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-13bpzm2"&&(s.textContent=r),a=E(S),l=Y(S,n[0]),S.forEach(v),u=E(k),o=w(k,"BUTTON",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-x9j6qp"&&(o.innerHTML=i),k.forEach(v),this.h()},h(){f(s,"class","font-bold"),f(t,"class","float-left"),f(o,"class","float-right"),f(e,"class","alert alert-error flow-root space-x-3")},m(y,k){J(y,e,k),p(e,t),p(t,s),p(t,a),p(t,l),p(e,u),p(e,o),c=!0,m||(d=Te(o,"click",n[2]),m=!0)},p(y,k){(!c||k&1)&&pe(l,y[0])},i(y){c||(y&&le(()=>{c&&(h||(h=te(e,ce,{duration:200},!0)),h.run(1))}),c=!0)},o(y){y&&(h||(h=te(e,ce,{duration:200},!1)),h.run(0)),c=!1},d(y){y&&v(e),y&&h&&h.end(),m=!1,d()}}}function ys(n){let e,t,s,r,a,l,u,o,i,h,c,m,d,y,k,S='<input type="checkbox" class="drawer-toggle"/> <svg class="swap-off fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path></svg> <svg class="swap-on fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"></polygon></svg>',A,P,H;a=new es({props:{sdk:n[1]}}),u=new fs({props:{sdk:n[1]}});let x={ctx:n,current:null,token:null,hasCatch:!1,pending:ws,then:gs,catch:ms,value:3,blocks:[,,,]};Be(n[1].currentUser.profile(),x),c=new vt({});let C=n[0]&&it(n);return P=new ls({props:{sdk:n[1]}}),{c(){e=g("div"),t=g("input"),s=T(),r=g("div"),fe(a.$$.fragment),l=T(),fe(u.$$.fragment),o=T(),i=g("div"),x.block.c(),h=T(),fe(c.$$.fragment),m=T(),d=g("div"),C&&C.c(),y=T(),k=g("label"),k.innerHTML=S,A=T(),fe(P.$$.fragment),this.h()},l(q){e=w(q,"DIV",{class:!0});var R=b(e);t=w(R,"INPUT",{id:!0,type:!0,class:!0}),s=E(R),r=w(R,"DIV",{class:!0});var z=b(r);me(a.$$.fragment,z),l=E(z),me(u.$$.fragment,z),o=E(z),i=w(z,"DIV",{class:!0});var U=b(i);x.block.l(U),h=E(U),me(c.$$.fragment,U),U.forEach(v),m=E(z),d=w(z,"DIV",{class:!0});var B=b(d);C&&C.l(B),y=E(B),k=w(B,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),M(k)!=="svelte-3obcrk"&&(k.innerHTML=S),B.forEach(v),z.forEach(v),A=E(R),me(P.$$.fragment,R),R.forEach(v),this.h()},h(){f(t,"id","my-drawer"),f(t,"type","checkbox"),f(t,"class","drawer-toggle"),f(i,"class","z-20 absolute top-0 right-0 pt-4 pr-4 flex flex-col items-end space-y-3"),f(k,"class","btn btn-circle btn-primary swap swap-rotate"),f(k,"for","my-drawer"),f(d,"class","z-20 absolute bottom-0 right-0 pr-4 pb-4 flex flex-col items-end space-y-3"),f(r,"class","drawer-content relative"),f(e,"class","drawer w-screen h-screen")},m(q,R){J(q,e,R),p(e,t),p(e,s),p(e,r),ge(a,r,null),p(r,l),ge(u,r,null),p(r,o),p(r,i),x.block.m(i,x.anchor=null),x.mount=()=>i,x.anchor=h,p(i,h),ge(c,i,null),p(r,m),p(r,d),C&&C.m(d,null),p(d,y),p(d,k),p(e,A),ge(P,e,null),H=!0},p(q,[R]){n=q,ct(x,n,R),n[0]?C?(C.p(n,R),R&1&&N(C,1)):(C=it(n),C.c(),N(C,1),C.m(d,y)):C&&(Se(),W(C,1,1,()=>{C=null}),qe())},i(q){H||(N(a.$$.fragment,q),N(u.$$.fragment,q),N(x.block),N(c.$$.fragment,q),N(C),N(P.$$.fragment,q),H=!0)},o(q){W(a.$$.fragment,q),W(u.$$.fragment,q);for(let R=0;R<3;R+=1){const z=x.blocks[R];W(z)}W(c.$$.fragment,q),W(C),W(P.$$.fragment,q),H=!1},d(q){q&&v(e),we(a),we(u),x.block.d(),x.token=null,x=null,we(c),C&&C.d(),we(P)}}}function vs(n,e,t){let s;ee(n,Ue,l=>t(0,s=l));const r=ze.withUserAuthorization("2ed0e6e8b06842fb854cb15e1690a7b5",window.location.origin+"/dashboard",["user-follow-read","user-top-read"]);return[s,r,()=>ie(Ue,s=null,s)]}class $s extends Fe{constructor(e){super(),Ae(this,e,vs,ys,Ee,{})}}export{$s as component};
