var et=Object.defineProperty;var tt=(n,e,t)=>e in n?et(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _=(n,e,t)=>(tt(n,typeof e!="symbol"?e+"":e,t),t);import{i as st,f as rt,h as Ce,j as at,s as $e,e as ae,k as Ye,l as se,m as je,r as nt,n as V}from"../chunks/scheduler.1d9bef59.js";import{p as pe,t as L,b as de,d as I,S as Se,i as qe,g as w,h as y,j as T,f as b,k as m,a as M,r as we,u as ye,v as ke,w as ve,m as K,s as P,n as W,c as A,x as h,o as fe,z as G,y as B,A as te,B as Re,C as _e,D as Me}from"../chunks/index.8f643eda.js";import{g as xe,n as Pe,a as Ae,G as ot,f as Q,N as me,b as ge,c as ze,d as He,T as it,e as Ge,h as ct}from"../chunks/ThemeSwitcher.06bd60d3.js";function lt(n,e){const t=e.token={};function s(r,a,o,c){if(e.token!==t)return;e.resolved=c;let i=e.ctx;o!==void 0&&(i=i.slice(),i[o]=c);const u=r&&(e.current=r)(i);let f=!1;e.block&&(e.blocks?e.blocks.forEach((l,d)=>{d!==a&&l&&(pe(),L(l,1,1,()=>{e.blocks[d]===l&&(e.blocks[d]=null)}),de())}):e.block.d(1),u.c(),I(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[a]=u),f&&at()}if(st(n)){const r=rt();if(n.then(a=>{Ce(r),s(e.then,1,e.value,a),Ce(null)},a=>{if(Ce(r),s(e.catch,2,e.error,a),Ce(null),!e.hasCatch)throw a}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}function ut(n,e,t){const s=e.slice(),{resolved:r}=n;n.current===n.then&&(s[n.value]=r),n.current===n.catch&&(s[n.error]=r),n.block.p(s,t)}class U{constructor(e){_(this,"api");this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,s=void 0){return await this.api.makeRequest("POST",e,t,s)}async putRequest(e,t,s=void 0){return await this.api.makeRequest("PUT",e,t,s)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let s of Object.getOwnPropertyNames(e))(e[s]||!e[s]&&typeof e[s]=="boolean")&&t.append(s,e[s].toString());return[...t].length>0?`?${t.toString()}`:""}}class ht extends U{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${s}`)).albums}tracks(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`albums/${e}/tracks${a}`)}}class pt extends U{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,s,r,a){const o=this.paramsFor({include_groups:t,market:s,limit:r,offset:a});return this.getRequest(`artists/${e}/albums${o}`)}topTracks(e,t){const s=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${s}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class dt extends U{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${s}`)).audiobooks}getAudiobookChapters(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`audiobooks/${e}/chapters${a}`)}}class ft extends U{getCategories(e,t,s,r){const a=this.paramsFor({country:e,locale:t,limit:s,offset:r});return this.getRequest(`browse/categories${a}`)}getCategory(e,t,s){const r=this.paramsFor({country:t,locale:s});return this.getRequest(`browse/categories/${e}${r}`)}getNewReleases(e,t,s){const r=this.paramsFor({country:e,limit:t,offset:s});return this.getRequest(`browse/new-releases${r}`)}getFeaturedPlaylists(e,t,s,r,a){const o=this.paramsFor({country:e,locale:t,timestamp:s,limit:r,offset:a});return this.getRequest(`browse/featured-playlists${o}`)}getPlaylistsForCategory(e,t,s,r){const a=this.paramsFor({country:t,limit:s,offset:r});return this.getRequest(`browse/categories/${e}/playlists${a}`)}}class mt extends U{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${s}`)).chapters}}class gt extends U{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${s}`)).episodes}}class wt extends U{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class yt extends U{getAvailableMarkets(){return this.getRequest("markets")}}class kt extends U{getPlaybackState(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player${s}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player/currently-playing${s}`)}getRecentlyPlayedTracks(e,t){const s={limit:e};t&&(t.type==="before"?s.before=t.timestamp:t.type==="after"&&(s.after=t.timestamp));const r=this.paramsFor(s);return this.getRequest(`me/player/recently-played${r}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,s,r,a){const o=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${o}`,{context_uri:t,uris:s,offset:r,positionMs:a})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const s=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${s}`)}async setRepeatMode(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${s}`)}async setPlaybackVolume(e,t){const s=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${s}`)}async togglePlaybackShuffle(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${s}`)}async addItemToPlaybackQueue(e,t){const s=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${s}`)}}class vt extends U{getPlaylist(e,t,s,r){const a=this.paramsFor({market:t,fields:s,additional_types:r});return this.getRequest(`playlists/${e}${a}`)}getPlaylistItems(e,t,s,r,a,o){const c=this.paramsFor({market:t,fields:s,limit:r,offset:a,additional_types:o});return this.getRequest(`playlists/${e}/tracks${c}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,s,r){return this.updatePlaylistItems(e,{range_start:t,range_length:s,insert_before:r})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,s){await this.postRequest(`playlists/${e}/tracks`,{position:s,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,s){const r=this.paramsFor({limit:t,offset:s});return this.getRequest(`users/${e}/playlists${r}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let s="";if(t instanceof Buffer)s=t.toString("base64");else if(t instanceof HTMLCanvasElement)s=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const a=r.getContext("2d");if(!a)throw new Error("Could not get canvas context");a.drawImage(t,0,0),s=r.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")s=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,s)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class _t extends U{async execute(e,t,s,r,a,o){const c=this.paramsFor({q:e,type:t,market:s,limit:r,offset:a,include_external:o});return await this.getRequest(`search${c}`)}}class bt extends U{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`shows/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${s}`)).shows}episodes(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`shows/${e}/episodes${a}`)}}class Ct extends U{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${s}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const Ne={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0};class Rt extends U{profile(e){return this.getRequest(`users/${e}`)}}class xt extends U{constructor(t){super(t);_(this,"albums");_(this,"audiobooks");_(this,"episodes");_(this,"playlists");_(this,"shows");_(this,"tracks");this.albums=new Tt(t),this.audiobooks=new $t(t),this.episodes=new St(t),this.playlists=new qt(t),this.shows=new Et(t),this.tracks=new Ft(t)}profile(){return this.getRequest("me")}topItems(t,s,r,a){const o=this.paramsFor({time_range:s,limit:r,offset:a});return this.getRequest(`me/top/${t}${o}`)}followedArtists(t,s){const r=this.paramsFor({type:"artist",after:t,limit:s});return this.getRequest(`me/following${r}`)}async followArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.putRequest(`me/following${r}`,{ids:t})}async unfollowArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.deleteRequest(`me/following${r}`,{ids:t})}followsArtistsOrUsers(t,s){const r=this.paramsFor({ids:t,type:s});return this.getRequest(`me/following/contains${r}`)}}class Tt extends U{savedAlbums(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/albums${r}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class $t extends U{savedAudiobooks(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${s}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class St extends U{savedEpisodes(e,t,s){const r=this.paramsFor({market:e,limit:t,offset:s});return this.getRequest(`me/episodes${r}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class qt extends U{playlists(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${s}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const s=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${s}`)}}class Et extends U{savedShows(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${s}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const s=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${s}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class Ft extends U{savedTracks(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/tracks${r}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class Pt{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class H{static async refreshCachedAccessToken(e,t){const s=await H.refreshToken(e,t.refresh_token);return H.toCachable(s)}static toCachable(e){return{...e,expires:Date.now()+e.expires_in*1e3}}static async refreshToken(e,t){const s=new URLSearchParams;s.append("client_id",e),s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to refresh token: ${r.statusText}, ${a}`);return JSON.parse(a)}static generateCodeVerifier(e){let t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),s=await Pt.current.subtle.digest("SHA-256",t),r=[...new Uint8Array(s)];return(typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}static get crypto(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}const ce=class ce{constructor(e,t,s=[]){_(this,"clientId");_(this,"clientSecret");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.clientSecret=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ce.cacheKey,async()=>{const t=await this.getTokenFromApi();return H.toCachable(t)})}async getAccessToken(){return await this.cache.get(ce.cacheKey)}removeAccessToken(){this.cache.remove(ce.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(i=>i+"="+e[i]).join("&"),s=typeof Buffer<"u",r=`${this.clientId}:${this.clientSecret}`,a=s?Buffer.from(r).toString("base64"):btoa(r),o=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${a}`},body:t});if(o.status!==200)throw new Error("Failed to get access token.");return await o.json()}};_(ce,"cacheKey","spotify-sdk:ClientCredentialsStrategy:token");let Ie=ce;const le=class le{constructor(e,t,s){_(this,"clientId");_(this,"redirectUri");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(le.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return H.toCachable(t)},async t=>H.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(le.cacheKey)}removeAccessToken(){this.cache.remove(le.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var r=(this.scopes??[]).join(" ");const a=new URLSearchParams;a.append("client_id",this.clientId),a.append("response_type","token"),a.append("redirect_uri",this.redirectUri),a.append("scope",r);const o="https://accounts.spotify.com/authorize?"+a.toString();return this.configuration.redirectionStrategy.redirect(o),Ne}};_(le,"cacheKey","spotify-sdk:ImplicitGrantStrategy:token");let Ue=le;const ue=class ue{constructor(e,t,s){_(this,"clientId");_(this,"redirectUri");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ue.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return H.toCachable(t)},async t=>H.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ue.cacheKey)}removeAccessToken(){this.cache.remove(ue.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(!t){const a=H.generateCodeVerifier(128),o=await H.generateCodeChallenge(a),c={verifier:a,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",c);const i=await this.generateRedirectUrlForUser(this.scopes,o);return await this.configuration.redirectionStrategy.redirect(i),Ne}this.removeCodeFromUrl();const s=await this.cache.get("spotify-sdk:verifier"),r=s==null?void 0:s.verifier;if(!r)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(t,r)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const s=e.join(" "),r=new URLSearchParams;return r.append("client_id",this.clientId),r.append("response_type","code"),r.append("redirect_uri",this.redirectUri),r.append("scope",s),r.append("code_challenge_method","S256"),r.append("code_challenge",t),`https://accounts.spotify.com/authorize?${r.toString()}`}async exchangeCodeForToken(e,t){const s=new URLSearchParams;s.append("client_id",this.clientId),s.append("grant_type","authorization_code"),s.append("code",e),s.append("redirect_uri",this.redirectUri),s.append("code_verifier",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to exchange code for token: ${r.statusText}, ${a}`);return JSON.parse(a)}};_(ue,"cacheKey","spotify-sdk:AuthorizationCodeWithPKCEStrategy:token");let Te=ue;class At{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class It{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const s=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${s}`)}}}}class Ut{async handleErrors(e){return!1}}class Ot{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class Xe{constructor(e,t=new Map,s=0,r=2*60*1e3){_(this,"storage");_(this,"updateFunctions");_(this,"autoRenewInterval");_(this,"autoRenewWindow");this.storage=e,this.updateFunctions=t,this.autoRenewInterval=s,this.autoRenewWindow=r,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,s){s&&this.updateFunctions.set(e,s);const r=await this.get(e);if(r)return r;const a=await t();if(!a)throw new Error("Could not create cache item");return this.setCacheItem(e,a),a}async get(e){let t=this.storage.get(e),s=t?JSON.parse(t):null;if(this.itemDueToExpire(s)&&this.updateFunctions.has(e)){const r=this.updateFunctions.get(e);await this.tryUpdateItem(e,s,r),t=this.storage.get(e),s=t?JSON.parse(t):null}return s?s.expires&&(s.expires===-1||s.expires<=Date.now())?(this.remove(e),null):(s.expiresOnAccess&&s.expiresOnAccess===!0&&this.remove(e),s):null}set(e,t,s){const r=Date.now()+s,a={...t,expires:r};this.setCacheItem(e,a)}setCacheItem(e,t){const s=JSON.stringify(t);this.storage.set(e,s)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const s=await this.get(t);s&&e&&this.itemDueToExpire(s)&&await this.tryUpdateItem(t,s,e)})}async tryUpdateItem(e,t,s){try{const r=await s(t);r&&this.setCacheItem(e,r)}catch(r){console.error(r)}}}class Lt extends Xe{constructor(){super(new Nt)}}class Nt{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class Bt extends Xe{constructor(){super(new Vt)}}class Vt{constructor(){_(this,"cache",new Map)}get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}const he=class he{constructor(e,t){_(this,"clientId");_(this,"accessToken");_(this,"configuration",null);this.clientId=e,this.accessToken=t}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return this.accessToken=await this.cache.getOrCreate(he.cacheKey,async()=>{const e=H.toCachable(this.accessToken);return Promise.resolve(e)},async e=>H.refreshCachedAccessToken(this.clientId,e)),this.accessToken}async getAccessToken(){return await this.cache.get(he.cacheKey)}removeAccessToken(){this.cache.remove(he.cacheKey)}};_(he,"cacheKey","spotify-sdk:ProvidedAccessTokenStrategy:token");let Oe=he;const X=class X{constructor(e,t){_(this,"sdkConfig");_(this,"authenticationStrategy");_(this,"albums");_(this,"artists");_(this,"audiobooks");_(this,"browse");_(this,"chapters");_(this,"episodes");_(this,"recommendations");_(this,"markets");_(this,"player");_(this,"playlists");_(this,"shows");_(this,"tracks");_(this,"users");_(this,"search");_(this,"currentUser");this.sdkConfig=this.initilizeSdk(t),this.albums=new ht(this),this.artists=new pt(this),this.audiobooks=new dt(this),this.browse=new ft(this),this.chapters=new mt(this),this.episodes=new gt(this),this.recommendations=new wt(this),this.markets=new yt(this),this.player=new kt(this),this.playlists=new vt(this),this.shows=new bt(this),this.tracks=new Ct(this),this.users=new Rt(this),this.currentUser=new xt(this);const s=new _t(this);this.search=s.execute.bind(s),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,s=void 0,r=void 0){try{const a=await this.authenticationStrategy.getOrCreateAccessToken(),o=a==null?void 0:a.access_token,c=X.rootUrl+t,i={method:e,headers:{Authorization:`Bearer ${o}`,"Content-Type":r??"application/json"},body:s?typeof s=="string"?s:JSON.stringify(s):void 0};this.sdkConfig.beforeRequest(c,i);const u=await this.sdkConfig.fetch(c,i);return this.sdkConfig.afterRequest(c,i,u),u.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(u),this.sdkConfig.deserializer.deserialize(u))}catch(a){if(!await this.sdkConfig.errorHandler.handleErrors(a))throw a;return null}}initilizeSdk(e){const t=typeof window<"u";return{...{fetch:(r,a)=>fetch(r,a),beforeRequest:(r,a)=>{},afterRequest:(r,a,o)=>{},deserializer:new At,responseValidator:new It,errorHandler:new Ut,redirectionStrategy:new Ot,cachingStrategy:t?new Lt:new Bt},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){return this.authenticationStrategy.getOrCreateAccessToken()}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,s=[],r){const a=new Te(e,t,s);return new X(a,r)}static withClientCredentials(e,t,s=[],r){const a=new Ie(e,t,s);return new X(a,r)}static withImplicitGrant(e,t,s=[],r){const a=new Ue(e,t,s);return new X(a,r)}static withAccessToken(e,t,s){const r=new Oe(e,t);return new X(r,s)}static async performUserAuthorization(e,t,s,r,a){const o=new Te(e,t,s),i=await new X(o,a).authenticationStrategy.getOrCreateAccessToken();if(JSON.stringify({...i,expires:0})!==JSON.stringify(Ne)){if(typeof r=="string"){await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});return}await r(i)}}};_(X,"rootUrl","https://api.spotify.com/v1/");let Le=X;function Dt(n){let e,t,s;return t=new ot({props:{data:n[0],nodeStyle:n[2]}}),{c(){e=w("div"),we(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var a=T(e);ye(t.$$.fragment,a),a.forEach(b),this.h()},h(){m(e,"class","w-full h-full z-0")},m(r,a){M(r,e,a),ke(t,e,null),s=!0},p(r,a){const o={};a&1&&(o.data=r[0]),a&4&&(o.nodeStyle=r[2]),t.$set(o)},i(r){s||(I(t.$$.fragment,r),s=!0)},o(r){L(t.$$.fragment,r),s=!1},d(r){r&&b(e),ve(t)}}}function jt(n){let e,t,s,r=n[1].text+"",a,o,c,i,u,f;return{c(){e=w("div"),t=w("div"),s=w("p"),a=K(r),o=P(),c=w("progress"),this.h()},l(l){e=y(l,"DIV",{class:!0});var d=T(e);t=y(d,"DIV",{class:!0});var p=T(t);s=y(p,"P",{class:!0});var g=T(s);a=W(g,r),g.forEach(b),o=A(p),c=y(p,"PROGRESS",{class:!0,max:!0}),T(c).forEach(b),p.forEach(b),d.forEach(b),this.h()},h(){m(s,"class","text-lg font-bold"),m(c,"class","progress w-56"),c.value=i=n[1].percentage,m(c,"max","100"),m(t,"class","text-center space-y-3"),m(e,"class","absolute top-0 left-0 z-10 w-screen h-screen flex justify-center items-center bg-base-100")},m(l,d){M(l,e,d),h(e,t),h(t,s),h(s,a),h(t,o),h(t,c),f=!0},p(l,d){(!f||d&2)&&r!==(r=l[1].text+"")&&fe(a,r),(!f||d&2&&i!==(i=l[1].percentage))&&(c.value=i)},i(l){f||(l&&se(()=>{f&&(u||(u=G(e,Q,{delay:100,duration:500},!0)),u.run(1))}),f=!0)},o(l){l&&(u||(u=G(e,Q,{delay:100,duration:500},!1)),u.run(0)),f=!1},d(l){l&&b(e),l&&u&&u.end()}}}function Mt(n){let e,t,s,r;const a=[jt,Dt],o=[];function c(i,u){return i[1]?0:1}return t=c(n),s=o[t]=a[t](n),{c(){e=w("div"),s.c(),this.h()},l(i){e=y(i,"DIV",{class:!0});var u=T(e);s.l(u),u.forEach(b),this.h()},h(){m(e,"class","relative")},m(i,u){M(i,e,u),o[t].m(e,null),r=!0},p(i,[u]){let f=t;t=c(i),t===f?o[t].p(i,u):(pe(),L(o[f],1,1,()=>{o[f]=null}),de(),s=o[t],s?s.p(i,u):(s=o[t]=a[t](i),s.c()),I(s,1),s.m(e,null))},i(i){r||(I(s),r=!0)},o(i){L(s),r=!1},d(i){i&&b(e),o[t].d()}}}function zt(n,e,t){let s,r;ae(n,xe,d=>t(4,s=d)),ae(n,Pe,d=>t(2,r=d));let{sdk:a}=e,{data:o}=e,{loading:c}=e;const i=async d=>{const p=d.map(q=>q.id),g=80/p.length;let k=[];for(const q of d){const $=await a.artists.relatedArtists(q.id);c&&t(1,c.percentage+=g,c);for(const N of $.artists)p.includes(N.id)&&!k.includes({source:N.id,target:q.id})&&!k.includes({source:q.id,target:N.id})&&k.push({source:q.id,target:N.id})}return k},u=async d=>{var g,k;const p=(await a.currentUser.followedArtists(d,50)).artists;return(g=p==null?void 0:p.cursors)!=null&&g.after?p.items.concat(await u((k=p==null?void 0:p.cursors)==null?void 0:k.after)):p.items},f=async(d="short")=>{switch(d){case"short_term":case"medium_term":case"long_term":return(await a.currentUser.topItems("artists",d,50)).items;case"following":return await u();case"all":return(await f("short_term")).concat(await f("medium_term")).concat(await f("long_term")).concat(await f("following"));default:return f("medium_term")}},l=async d=>{try{t(1,c={text:"Downloading Artists",percentage:10});const p=await f(d);t(1,c={text:"Building Links",percentage:20});const g=await i(p);t(1,c=null),t(0,o={nodes:p,links:g})}catch(p){Ye(xe,s=p,s)}};return Ae.subscribe(l),n.$$set=d=>{"sdk"in d&&t(3,a=d.sdk),"data"in d&&t(0,o=d.data),"loading"in d&&t(1,c=d.loading)},[o,c,r,a]}class Ht extends Se{constructor(e){super(),qe(this,e,zt,Mt,$e,{sdk:3,data:0,loading:1})}}function Gt(n){let e,t=n[0].display_name+"",s;return{c(){e=w("span"),s=K(t)},l(r){e=y(r,"SPAN",{});var a=T(e);s=W(a,t),a.forEach(b)},m(r,a){M(r,e,a),h(e,s)},p(r,a){a&1&&t!==(t=r[0].display_name+"")&&fe(s,t)},d(r){r&&b(e)}}}function Jt(n){let e,t;return{c(){e=w("img"),this.h()},l(s){e=y(s,"IMG",{src:!0,alt:!0}),this.h()},h(){var s;je(e.src,t=(s=n[0].images)==null?void 0:s.slice(-1)[0].url)||m(e,"src",t),m(e,"alt","profile")},m(s,r){M(s,e,r)},p(s,r){var a;r&1&&!je(e.src,t=(a=s[0].images)==null?void 0:a.slice(-1)[0].url)&&m(e,"src",t)},d(s){s&&b(e)}}}function Kt(n){let e,t,s,r,a,o,c;function i(l,d){var p,g;return((g=(p=l[0])==null?void 0:p.images)==null?void 0:g.length)>0?Jt:Gt}let u=i(n),f=u(n);return{c(){e=w("div"),t=w("div"),s=w("a"),f.c(),this.h()},l(l){e=y(l,"DIV",{class:!0,"data-tip":!0});var d=T(e);t=y(d,"DIV",{class:!0});var p=T(t);s=y(p,"A",{class:!0,href:!0,target:!0,rel:!0});var g=T(s);f.l(g),g.forEach(b),p.forEach(b),d.forEach(b),this.h()},h(){m(s,"class","w-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2 overflow-hidden"),m(s,"href",r=n[0].external_urls.spotify),m(s,"target","_blank"),m(s,"rel","noreferrer noopener"),m(t,"class","avatar"),m(e,"class","tooltip tooltip-bottom select-none"),m(e,"data-tip",a=n[0].display_name)},m(l,d){M(l,e,d),h(e,t),h(t,s),f.m(s,null),c=!0},p(l,[d]){u===(u=i(l))&&f?f.p(l,d):(f.d(1),f=u(l),f&&(f.c(),f.m(s,null))),(!c||d&1&&r!==(r=l[0].external_urls.spotify))&&m(s,"href",r),(!c||d&1&&a!==(a=l[0].display_name))&&m(e,"data-tip",a)},i(l){c||(l&&se(()=>{c&&(o||(o=G(e,Q,{duration:400},!0)),o.run(1))}),c=!0)},o(l){l&&(o||(o=G(e,Q,{duration:400},!1)),o.run(0)),c=!1},d(l){l&&b(e),f.d(),l&&o&&o.end()}}}function Wt(n,e,t){let{profile:s}=e;return n.$$set=r=>{"profile"in r&&t(0,s=r.profile)},[s]}class Zt extends Se{constructor(e){super(),qe(this,e,Wt,Kt,$e,{profile:0})}}function Je(n){let e,t,s,r,a="Color by Popularity",o,c,i,u,f,l,d,p=n[3]&&Ke();return{c(){e=w("div"),t=w("div"),s=w("label"),r=w("span"),r.textContent=a,o=P(),c=w("input"),i=P(),p&&p.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var k=T(e);t=y(k,"DIV",{class:!0});var q=T(t);s=y(q,"LABEL",{class:!0});var $=T(s);r=y($,"SPAN",{class:!0,"data-svelte-h":!0}),B(r)!=="svelte-1w1k44k"&&(r.textContent=a),o=A($),c=y($,"INPUT",{type:!0,class:!0}),$.forEach(b),q.forEach(b),i=A(k),p&&p.l(k),k.forEach(b),this.h()},h(){m(r,"class","label-text"),m(c,"type","checkbox"),m(c,"class","checkbox"),m(s,"class","label cursor-pointer"),m(t,"class","form-control"),m(e,"class","flex flex-col")},m(g,k){M(g,e,k),h(e,t),h(t,s),h(s,r),h(s,o),h(s,c),c.checked=n[3],h(e,i),p&&p.m(e,null),f=!0,l||(d=_e(c,"change",n[6]),l=!0)},p(g,k){k&8&&(c.checked=g[3]),g[3]?p?k&8&&I(p,1):(p=Ke(),p.c(),I(p,1),p.m(e,null)):p&&(pe(),L(p,1,1,()=>{p=null}),de())},i(g){f||(I(p),g&&se(()=>{f&&(u||(u=G(e,Q,{},!0)),u.run(1))}),f=!0)},o(g){L(p),g&&(u||(u=G(e,Q,{},!1)),u.run(0)),f=!1},d(g){g&&b(e),p&&p.d(),g&&u&&u.end(),l=!1,d()}}}function Ke(n){let e,t='<p class="text-left">Less Popular</p> <p class="text-right">More Popular</p>',s,r;return{c(){e=w("div"),e.innerHTML=t,this.h()},l(a){e=y(a,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-17ane3m"&&(e.innerHTML=t),this.h()},h(){m(e,"class","inline-grid mx-1 flex-grow grid-cols-2 px-3 py-1 text-xs md:text-base text-white rounded-md shadow-md bg-gradient-to-r from-[#15803d] via-[#7e22ce] to-[#be185d]")},m(a,o){M(a,e,o),r=!0},i(a){r||(a&&se(()=>{r&&(s||(s=G(e,He,{y:-4},!0)),s.run(1))}),r=!0)},o(a){a&&(s||(s=G(e,He,{y:-4},!1)),s.run(0)),r=!1},d(a){a&&b(e),a&&s&&s.end()}}}function Qt(n){let e,t,s,r,a,o="Preferences",c,i,u,f="Top of The Past Month",l,d="Top of The Past Year",p,g="Top of All Time",k,q="Following",$,N="All Available",S,R,C,x="View as Dots",v,E="View as Pictures",F,z="View as Names",ne,Y,Z,oe,ee,Be="Log Out",Ee,re,Ve='<i>© 2023 Grant Handy · <a href="/LICENSE.txt" class="link" target="_blank" rel="noreferrer noopener">License</a></i>',Fe,De,O=n[2]!=me.Picture&&Je(n);return{c(){e=w("div"),t=w("label"),s=P(),r=w("div"),a=w("h1"),a.textContent=o,c=P(),i=w("select"),u=w("option"),u.textContent=f,l=w("option"),l.textContent=d,p=w("option"),p.textContent=g,k=w("option"),k.textContent=q,$=w("option"),$.textContent=N,S=P(),R=w("select"),C=w("option"),C.textContent=x,v=w("option"),v.textContent=E,F=w("option"),F.textContent=z,ne=P(),O&&O.c(),Y=P(),Z=w("div"),oe=P(),ee=w("button"),ee.textContent=Be,Ee=P(),re=w("p"),re.innerHTML=Ve,this.h()},l(j){e=y(j,"DIV",{class:!0});var J=T(e);t=y(J,"LABEL",{for:!0,class:!0}),T(t).forEach(b),s=A(J),r=y(J,"DIV",{class:!0});var D=T(r);a=y(D,"H1",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-n7an2l"&&(a.textContent=o),c=A(D),i=y(D,"SELECT",{class:!0});var ie=T(i);u=y(ie,"OPTION",{"data-svelte-h":!0}),B(u)!=="svelte-18ovyn3"&&(u.textContent=f),l=y(ie,"OPTION",{"data-svelte-h":!0}),B(l)!=="svelte-1s4lgcp"&&(l.textContent=d),p=y(ie,"OPTION",{"data-svelte-h":!0}),B(p)!=="svelte-t59ye6"&&(p.textContent=g),k=y(ie,"OPTION",{"data-svelte-h":!0}),B(k)!=="svelte-1utbkqg"&&(k.textContent=q),$=y(ie,"OPTION",{"data-svelte-h":!0}),B($)!=="svelte-1p6vrpt"&&($.textContent=N),ie.forEach(b),S=A(D),R=y(D,"SELECT",{class:!0});var be=T(R);C=y(be,"OPTION",{"data-svelte-h":!0}),B(C)!=="svelte-1ru6mvb"&&(C.textContent=x),v=y(be,"OPTION",{"data-svelte-h":!0}),B(v)!=="svelte-hpqvnh"&&(v.textContent=E),F=y(be,"OPTION",{"data-svelte-h":!0}),B(F)!=="svelte-1arngzx"&&(F.textContent=z),be.forEach(b),ne=A(D),O&&O.l(D),Y=A(D),Z=y(D,"DIV",{class:!0}),T(Z).forEach(b),oe=A(D),ee=y(D,"BUTTON",{class:!0,"data-svelte-h":!0}),B(ee)!=="svelte-11tytfz"&&(ee.textContent=Be),Ee=A(D),re=y(D,"P",{class:!0,"data-svelte-h":!0}),B(re)!=="svelte-g4e2e5"&&(re.innerHTML=Ve),D.forEach(b),J.forEach(b),this.h()},h(){m(t,"for","my-drawer"),m(t,"class","drawer-overlay"),m(a,"class","text-xl"),u.__value=ge.ShortTerm,te(u,u.__value),l.__value=ge.MediumTerm,te(l,l.__value),p.__value=ge.LongTerm,te(p,p.__value),k.__value=ge.Following,te(k,k.__value),$.__value=ge.All,te($,$.__value),m(i,"class","select select-bordered w-full"),n[1]===void 0&&se(()=>n[4].call(i)),C.__value=me.Dot,te(C,C.__value),v.__value=me.Picture,te(v,v.__value),F.__value=me.Text,te(F,F.__value),m(R,"class","select select-bordered w-full"),n[2]===void 0&&se(()=>n[5].call(R)),m(Z,"class","flex-grow"),m(ee,"class","btn btn-primary"),m(re,"class","text-xs text-center"),m(r,"class","menu p-4 w-64 md:w-80 h-full bg-base-200 text-base-content space-y-2 flex flex-col"),m(e,"class","drawer-side z-50")},m(j,J){M(j,e,J),h(e,t),h(e,s),h(e,r),h(r,a),h(r,c),h(r,i),h(i,u),h(i,l),h(i,p),h(i,k),h(i,$),Re(i,n[1],!0),h(r,S),h(r,R),h(R,C),h(R,v),h(R,F),Re(R,n[2],!0),h(r,ne),O&&O.m(r,null),h(r,Y),h(r,Z),h(r,oe),h(r,ee),h(r,Ee),h(r,re),Fe||(De=[_e(i,"change",n[4]),_e(R,"change",n[5]),_e(ee,"click",n[7])],Fe=!0)},p(j,[J]){J&2&&Re(i,j[1]),J&4&&Re(R,j[2]),j[2]!=me.Picture?O?(O.p(j,J),J&4&&I(O,1)):(O=Je(j),O.c(),I(O,1),O.m(r,Y)):O&&(pe(),L(O,1,1,()=>{O=null}),de())},i(j){I(O)},o(j){L(O)},d(j){j&&b(e),O&&O.d(),Fe=!1,nt(De)}}}function Yt(n,e,t){let s,r,a;ae(n,Ae,l=>t(1,s=l)),ae(n,Pe,l=>t(2,r=l)),ae(n,ze,l=>t(3,a=l));let{sdk:o}=e;function c(){s=Me(this),Ae.set(s)}function i(){r=Me(this),Pe.set(r)}function u(){a=this.checked,ze.set(a)}const f=()=>{o.logOut(),localStorage.clear(),window.location.href="/"};return n.$$set=l=>{"sdk"in l&&t(0,o=l.sdk)},[o,s,r,a,c,i,u,f]}class Xt extends Se{constructor(e){super(),qe(this,e,Yt,Qt,$e,{sdk:0})}}function We(n){let e,t,s,r,a=n[0].name+"",o,c,i,u,f,l=n[0].popularity+"",d,p,g,k,q,$,N,S,R,C,x=n[0].genres.length>0&&Ze(n);return{c(){e=w("div"),t=w("div"),s=w("div"),r=w("h2"),o=K(a),c=P(),i=w("p"),u=w("span"),f=K("Popularity: "),d=K(l),p=K("% ·"),g=P(),k=w("a"),q=K("Link"),N=P(),x&&x.c(),this.h()},l(v){e=y(v,"DIV",{class:!0,style:!0});var E=T(e);t=y(E,"DIV",{class:!0});var F=T(t);s=y(F,"DIV",{});var z=T(s);r=y(z,"H2",{class:!0});var ne=T(r);o=W(ne,a),ne.forEach(b),c=A(z),i=y(z,"P",{class:!0});var Y=T(i);u=y(Y,"SPAN",{class:!0});var Z=T(u);f=W(Z,"Popularity: "),d=W(Z,l),p=W(Z,"% ·"),Z.forEach(b),g=A(Y),k=y(Y,"A",{href:!0,class:!0,target:!0,rel:!0});var oe=T(k);q=W(oe,"Link"),oe.forEach(b),Y.forEach(b),z.forEach(b),N=A(F),x&&x.l(F),F.forEach(b),E.forEach(b),this.h()},h(){var v;m(r,"class","card-title"),m(u,"class","italic"),m(k,"href",$=n[0].external_urls.spotify),m(k,"class","link"),m(k,"target","_blank"),m(k,"rel","noreferrer noopener"),m(i,"class","text-sm"),m(t,"class","flex-grow p-4 backdrop-brightness-50 rounded-xl text-white space-y-2"),m(e,"class","z-20 absolute top-4 left-4 w-48 md:w-64 flex shadow-2xl rounded-xl bg-cover bg-center"),m(e,"style",S=`background-image: url(${((v=n[0].images[0])==null?void 0:v.url)??Ge})`)},m(v,E){M(v,e,E),h(e,t),h(t,s),h(s,r),h(r,o),h(s,c),h(s,i),h(i,u),h(u,f),h(u,d),h(u,p),h(i,g),h(i,k),h(k,q),h(t,N),x&&x.m(t,null),C=!0},p(v,E){var F;(!C||E&1)&&a!==(a=v[0].name+"")&&fe(o,a),(!C||E&1)&&l!==(l=v[0].popularity+"")&&fe(d,l),(!C||E&1&&$!==($=v[0].external_urls.spotify))&&m(k,"href",$),v[0].genres.length>0?x?x.p(v,E):(x=Ze(v),x.c(),x.m(t,null)):x&&(x.d(1),x=null),(!C||E&1&&S!==(S=`background-image: url(${((F=v[0].images[0])==null?void 0:F.url)??Ge})`))&&m(e,"style",S)},i(v){C||(v&&se(()=>{C&&(R||(R=G(e,Q,{duration:100},!0)),R.run(1))}),C=!0)},o(v){v&&(R||(R=G(e,Q,{duration:100},!1)),R.run(0)),C=!1},d(v){v&&b(e),x&&x.d(),v&&R&&R.end()}}}function Ze(n){let e,t,s=n[0].genres.slice(0,4).join(", ")+"",r,a;return{c(){e=w("p"),t=K("Genres: "),r=K(s),a=K("."),this.h()},l(o){e=y(o,"P",{class:!0});var c=T(e);t=W(c,"Genres: "),r=W(c,s),a=W(c,"."),c.forEach(b),this.h()},h(){m(e,"class","text-xs")},m(o,c){M(o,e,c),h(e,t),h(e,r),h(e,a)},p(o,c){c&1&&s!==(s=o[0].genres.slice(0,4).join(", ")+"")&&fe(r,s)},d(o){o&&b(e)}}}function es(n){return{c:V,l:V,m:V,p:V,i:V,o:V,d:V}}function ts(n){let e,t;return e=new Zt({props:{profile:n[5]}}),{c(){we(e.$$.fragment)},l(s){ye(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p:V,i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function ss(n){return{c:V,l:V,m:V,p:V,i:V,o:V,d:V}}function Qe(n){let e,t,s,r="Error:",a,o,c,i,u='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',f,l,d,p;return{c(){e=w("div"),t=w("span"),s=w("span"),s.textContent=r,a=P(),o=K(n[1]),c=P(),i=w("button"),i.innerHTML=u,this.h()},l(g){e=y(g,"DIV",{class:!0});var k=T(e);t=y(k,"SPAN",{class:!0});var q=T(t);s=y(q,"SPAN",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-13bpzm2"&&(s.textContent=r),a=A(q),o=W(q,n[1]),q.forEach(b),c=A(k),i=y(k,"BUTTON",{class:!0,"data-svelte-h":!0}),B(i)!=="svelte-x9j6qp"&&(i.innerHTML=u),k.forEach(b),this.h()},h(){m(s,"class","font-bold"),m(t,"class","float-left"),m(i,"class","float-right"),m(e,"class","alert alert-error flow-root space-x-3")},m(g,k){M(g,e,k),h(e,t),h(t,s),h(t,a),h(t,o),h(e,c),h(e,i),l=!0,d||(p=_e(i,"click",n[4]),d=!0)},p(g,k){(!l||k&2)&&fe(o,g[1])},i(g){l||(g&&se(()=>{l&&(f||(f=G(e,Q,{duration:200},!0)),f.run(1))}),l=!0)},o(g){g&&(f||(f=G(e,Q,{duration:200},!1)),f.run(0)),l=!1},d(g){g&&b(e),g&&f&&f.end(),d=!1,p()}}}function rs(n){let e,t,s,r,a,o,c,i,u,f,l,d,p,g,k='<input type="checkbox" class="drawer-toggle"/> <svg class="swap-off fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path></svg> <svg class="swap-on fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"></polygon></svg>',q,$,N;a=new Ht({props:{sdk:n[2],data:n[3],loading:as}});let S=n[0]&&We(n),R={ctx:n,current:null,token:null,hasCatch:!1,pending:ss,then:ts,catch:es,value:5,blocks:[,,,]};lt(n[2].currentUser.profile(),R),f=new it({});let C=n[1]&&Qe(n);return $=new Xt({props:{sdk:n[2]}}),{c(){e=w("div"),t=w("input"),s=P(),r=w("div"),we(a.$$.fragment),o=P(),S&&S.c(),c=P(),i=w("div"),R.block.c(),u=P(),we(f.$$.fragment),l=P(),d=w("div"),C&&C.c(),p=P(),g=w("label"),g.innerHTML=k,q=P(),we($.$$.fragment),this.h()},l(x){e=y(x,"DIV",{class:!0});var v=T(e);t=y(v,"INPUT",{id:!0,type:!0,class:!0}),s=A(v),r=y(v,"DIV",{class:!0});var E=T(r);ye(a.$$.fragment,E),o=A(E),S&&S.l(E),c=A(E),i=y(E,"DIV",{class:!0});var F=T(i);R.block.l(F),u=A(F),ye(f.$$.fragment,F),F.forEach(b),l=A(E),d=y(E,"DIV",{class:!0});var z=T(d);C&&C.l(z),p=A(z),g=y(z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(g)!=="svelte-3obcrk"&&(g.innerHTML=k),z.forEach(b),E.forEach(b),q=A(v),ye($.$$.fragment,v),v.forEach(b),this.h()},h(){m(t,"id","my-drawer"),m(t,"type","checkbox"),m(t,"class","drawer-toggle"),m(i,"class","z-20 absolute top-0 right-0 pt-4 pr-4 flex flex-col items-end space-y-3"),m(g,"class","btn btn-circle btn-primary swap swap-rotate"),m(g,"for","my-drawer"),m(d,"class","z-20 absolute bottom-0 right-0 pr-4 pb-4 flex flex-col items-end space-y-3"),m(r,"class","drawer-content relative"),m(e,"class","drawer w-screen h-screen")},m(x,v){M(x,e,v),h(e,t),h(e,s),h(e,r),ke(a,r,null),h(r,o),S&&S.m(r,null),h(r,c),h(r,i),R.block.m(i,R.anchor=null),R.mount=()=>i,R.anchor=u,h(i,u),ke(f,i,null),h(r,l),h(r,d),C&&C.m(d,null),h(d,p),h(d,g),h(e,q),ke($,e,null),N=!0},p(x,[v]){n=x,n[0]?S?(S.p(n,v),v&1&&I(S,1)):(S=We(n),S.c(),I(S,1),S.m(r,c)):S&&(pe(),L(S,1,1,()=>{S=null}),de()),ut(R,n,v),n[1]?C?(C.p(n,v),v&2&&I(C,1)):(C=Qe(n),C.c(),I(C,1),C.m(d,p)):C&&(pe(),L(C,1,1,()=>{C=null}),de())},i(x){N||(I(a.$$.fragment,x),I(S),I(R.block),I(f.$$.fragment,x),I(C),I($.$$.fragment,x),N=!0)},o(x){L(a.$$.fragment,x),L(S);for(let v=0;v<3;v+=1){const E=R.blocks[v];L(E)}L(f.$$.fragment,x),L(C),L($.$$.fragment,x),N=!1},d(x){x&&b(e),ve(a),S&&S.d(),R.block.d(),R.token=null,R=null,ve(f),C&&C.d(),ve($)}}}let as=null;function ns(n,e,t){let s,r;ae(n,ct,i=>t(0,s=i)),ae(n,xe,i=>t(1,r=i));const a=Le.withUserAuthorization("2ed0e6e8b06842fb854cb15e1690a7b5",window.location.origin+"/dashboard",["user-follow-read","user-top-read"]);return[s,r,a,{nodes:[],links:[]},()=>Ye(xe,r=null,r)]}class us extends Se{constructor(e){super(),qe(this,e,ns,rs,$e,{})}}export{us as component};
