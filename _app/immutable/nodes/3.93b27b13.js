var ht=Object.defineProperty;var pt=(n,e,t)=>e in n?ht(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _=(n,e,t)=>(pt(n,typeof e!="symbol"?e+"":e,t),t);import{i as dt,f as ft,h as Ie,j as mt,s as Se,e as se,k as le,l as ce,m as We,r as gt,n as b}from"../chunks/scheduler.1d9bef59.js";import{p as qe,t as G,b as Fe,d as O,S as Ae,i as Pe,g,h as w,j as C,f as y,k as f,a as L,r as fe,u as me,v as ge,w as we,m as X,s as R,n as ee,c as T,x as p,o as pe,A as re,z as j,B as ie,C as Ue,D as Ee,E as Ye,e as be,F as ct,G as wt,y as yt}from"../chunks/index.663da7e1.js";import{g as Le,a as Ze,l as xe,n as Be,b as Oe,G as vt,f as ue,N as Re,c as Te,d as Qe,e as je,h as Xe,T as kt}from"../chunks/ThemeSwitcher.e7b8e11a.js";function Ve(n,e){const t=e.token={};function s(r,a,i,u){if(e.token!==t)return;e.resolved=u;let o=e.ctx;i!==void 0&&(o=o.slice(),o[i]=u);const l=r&&(e.current=r)(o);let h=!1;e.block&&(e.blocks?e.blocks.forEach((c,m)=>{m!==a&&c&&(qe(),G(c,1,1,()=>{e.blocks[m]===c&&(e.blocks[m]=null)}),Fe())}):e.block.d(1),l.c(),O(l,1),l.m(e.mount(),e.anchor),h=!0),e.block=l,e.blocks&&(e.blocks[a]=l),h&&mt()}if(dt(n)){const r=ft();if(n.then(a=>{Ie(r),s(e.then,1,e.value,a),Ie(null)},a=>{if(Ie(r),s(e.catch,2,e.error,a),Ie(null),!e.hasCatch)throw a}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}function Je(n,e,t){const s=e.slice(),{resolved:r}=n;n.current===n.then&&(s[n.value]=r),n.current===n.catch&&(s[n.error]=r),n.block.p(s,t)}function De(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class V{constructor(e){_(this,"api");this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,s=void 0){return await this.api.makeRequest("POST",e,t,s)}async putRequest(e,t,s=void 0){return await this.api.makeRequest("PUT",e,t,s)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let s of Object.getOwnPropertyNames(e))(e[s]||!e[s]&&typeof e[s]=="boolean")&&t.append(s,e[s].toString());return[...t].length>0?`?${t.toString()}`:""}}class _t extends V{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${s}`)).albums}tracks(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`albums/${e}/tracks${a}`)}}class bt extends V{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,s,r,a){const i=this.paramsFor({include_groups:t,market:s,limit:r,offset:a});return this.getRequest(`artists/${e}/albums${i}`)}topTracks(e,t){const s=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${s}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class Ct extends V{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${s}`)).audiobooks}getAudiobookChapters(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`audiobooks/${e}/chapters${a}`)}}class $t extends V{getCategories(e,t,s,r){const a=this.paramsFor({country:e,locale:t,limit:s,offset:r});return this.getRequest(`browse/categories${a}`)}getCategory(e,t,s){const r=this.paramsFor({country:t,locale:s});return this.getRequest(`browse/categories/${e}${r}`)}getNewReleases(e,t,s){const r=this.paramsFor({country:e,limit:t,offset:s});return this.getRequest(`browse/new-releases${r}`)}getFeaturedPlaylists(e,t,s,r,a){const i=this.paramsFor({country:e,locale:t,timestamp:s,limit:r,offset:a});return this.getRequest(`browse/featured-playlists${i}`)}getPlaylistsForCategory(e,t,s,r){const a=this.paramsFor({country:t,limit:s,offset:r});return this.getRequest(`browse/categories/${e}/playlists${a}`)}}class xt extends V{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${s}`)).chapters}}class Rt extends V{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${s}`)).episodes}}class Tt extends V{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class Et extends V{getAvailableMarkets(){return this.getRequest("markets")}}class St extends V{getPlaybackState(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player${s}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player/currently-playing${s}`)}getRecentlyPlayedTracks(e,t){const s={limit:e};t&&(t.type==="before"?s.before=t.timestamp:t.type==="after"&&(s.after=t.timestamp));const r=this.paramsFor(s);return this.getRequest(`me/player/recently-played${r}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,s,r,a){const i=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${i}`,{context_uri:t,uris:s,offset:r,positionMs:a})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const s=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${s}`)}async setRepeatMode(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${s}`)}async setPlaybackVolume(e,t){const s=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${s}`)}async togglePlaybackShuffle(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${s}`)}async addItemToPlaybackQueue(e,t){const s=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${s}`)}}class qt extends V{getPlaylist(e,t,s,r){const a=this.paramsFor({market:t,fields:s,additional_types:r});return this.getRequest(`playlists/${e}${a}`)}getPlaylistItems(e,t,s,r,a,i){const u=this.paramsFor({market:t,fields:s,limit:r,offset:a,additional_types:i});return this.getRequest(`playlists/${e}/tracks${u}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,s,r){return this.updatePlaylistItems(e,{range_start:t,range_length:s,insert_before:r})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,s){await this.postRequest(`playlists/${e}/tracks`,{position:s,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,s){const r=this.paramsFor({limit:t,offset:s});return this.getRequest(`users/${e}/playlists${r}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let s="";if(t instanceof Buffer)s=t.toString("base64");else if(t instanceof HTMLCanvasElement)s=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const a=r.getContext("2d");if(!a)throw new Error("Could not get canvas context");a.drawImage(t,0,0),s=r.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")s=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,s)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class Ft extends V{async execute(e,t,s,r,a,i){const u=this.paramsFor({q:e,type:t,market:s,limit:r,offset:a,include_external:i});return await this.getRequest(`search${u}`)}}class At extends V{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`shows/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${s}`)).shows}episodes(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`shows/${e}/episodes${a}`)}}class Pt extends V{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${s}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const Ke={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0};class It extends V{profile(e){return this.getRequest(`users/${e}`)}}class Ut extends V{constructor(t){super(t);_(this,"albums");_(this,"audiobooks");_(this,"episodes");_(this,"playlists");_(this,"shows");_(this,"tracks");this.albums=new Lt(t),this.audiobooks=new Ot(t),this.episodes=new Vt(t),this.playlists=new Dt(t),this.shows=new Nt(t),this.tracks=new Bt(t)}profile(){return this.getRequest("me")}topItems(t,s,r,a){const i=this.paramsFor({time_range:s,limit:r,offset:a});return this.getRequest(`me/top/${t}${i}`)}followedArtists(t,s){const r=this.paramsFor({type:"artist",after:t,limit:s});return this.getRequest(`me/following${r}`)}async followArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.putRequest(`me/following${r}`,{ids:t})}async unfollowArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.deleteRequest(`me/following${r}`,{ids:t})}followsArtistsOrUsers(t,s){const r=this.paramsFor({ids:t,type:s});return this.getRequest(`me/following/contains${r}`)}}class Lt extends V{savedAlbums(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/albums${r}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class Ot extends V{savedAudiobooks(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${s}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class Vt extends V{savedEpisodes(e,t,s){const r=this.paramsFor({market:e,limit:t,offset:s});return this.getRequest(`me/episodes${r}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class Dt extends V{playlists(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${s}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const s=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${s}`)}}class Nt extends V{savedShows(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${s}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const s=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${s}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class Bt extends V{savedTracks(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/tracks${r}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class jt{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class Q{static async refreshCachedAccessToken(e,t){const s=await Q.refreshToken(e,t.refresh_token);return Q.toCachable(s)}static toCachable(e){return{...e,expires:Date.now()+e.expires_in*1e3}}static async refreshToken(e,t){const s=new URLSearchParams;s.append("client_id",e),s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to refresh token: ${r.statusText}, ${a}`);return JSON.parse(a)}static generateCodeVerifier(e){let t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),s=await jt.current.subtle.digest("SHA-256",t),r=[...new Uint8Array(s)];return(typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}static get crypto(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}const ye=class ye{constructor(e,t,s=[]){_(this,"clientId");_(this,"clientSecret");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.clientSecret=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ye.cacheKey,async()=>{const t=await this.getTokenFromApi();return Q.toCachable(t)})}async getAccessToken(){return await this.cache.get(ye.cacheKey)}removeAccessToken(){this.cache.remove(ye.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(o=>o+"="+e[o]).join("&"),s=typeof Buffer<"u",r=`${this.clientId}:${this.clientSecret}`,a=s?Buffer.from(r).toString("base64"):btoa(r),i=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${a}`},body:t});if(i.status!==200)throw new Error("Failed to get access token.");return await i.json()}};_(ye,"cacheKey","spotify-sdk:ClientCredentialsStrategy:token");let Me=ye;const ve=class ve{constructor(e,t,s){_(this,"clientId");_(this,"redirectUri");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ve.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return Q.toCachable(t)},async t=>Q.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ve.cacheKey)}removeAccessToken(){this.cache.remove(ve.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var r=(this.scopes??[]).join(" ");const a=new URLSearchParams;a.append("client_id",this.clientId),a.append("response_type","token"),a.append("redirect_uri",this.redirectUri),a.append("scope",r);const i="https://accounts.spotify.com/authorize?"+a.toString();return this.configuration.redirectionStrategy.redirect(i),Ke}};_(ve,"cacheKey","spotify-sdk:ImplicitGrantStrategy:token");let He=ve;const ke=class ke{constructor(e,t,s){_(this,"clientId");_(this,"redirectUri");_(this,"scopes");_(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ke.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return Q.toCachable(t)},async t=>Q.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ke.cacheKey)}removeAccessToken(){this.cache.remove(ke.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(!t){const a=Q.generateCodeVerifier(128),i=await Q.generateCodeChallenge(a),u={verifier:a,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",u);const o=await this.generateRedirectUrlForUser(this.scopes,i);return await this.configuration.redirectionStrategy.redirect(o),Ke}this.removeCodeFromUrl();const s=await this.cache.get("spotify-sdk:verifier"),r=s==null?void 0:s.verifier;if(!r)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(t,r)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const s=e.join(" "),r=new URLSearchParams;return r.append("client_id",this.clientId),r.append("response_type","code"),r.append("redirect_uri",this.redirectUri),r.append("scope",s),r.append("code_challenge_method","S256"),r.append("code_challenge",t),`https://accounts.spotify.com/authorize?${r.toString()}`}async exchangeCodeForToken(e,t){const s=new URLSearchParams;s.append("client_id",this.clientId),s.append("grant_type","authorization_code"),s.append("code",e),s.append("redirect_uri",this.redirectUri),s.append("code_verifier",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to exchange code for token: ${r.statusText}, ${a}`);return JSON.parse(a)}};_(ke,"cacheKey","spotify-sdk:AuthorizationCodeWithPKCEStrategy:token");let Ne=ke;class Mt{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class Ht{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const s=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${s}`)}}}}class zt{async handleErrors(e){return!1}}class Gt{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class ut{constructor(e,t=new Map,s=0,r=2*60*1e3){_(this,"storage");_(this,"updateFunctions");_(this,"autoRenewInterval");_(this,"autoRenewWindow");this.storage=e,this.updateFunctions=t,this.autoRenewInterval=s,this.autoRenewWindow=r,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,s){s&&this.updateFunctions.set(e,s);const r=await this.get(e);if(r)return r;const a=await t();if(!a)throw new Error("Could not create cache item");return this.setCacheItem(e,a),a}async get(e){let t=this.storage.get(e),s=t?JSON.parse(t):null;if(this.itemDueToExpire(s)&&this.updateFunctions.has(e)){const r=this.updateFunctions.get(e);await this.tryUpdateItem(e,s,r),t=this.storage.get(e),s=t?JSON.parse(t):null}return s?s.expires&&(s.expires===-1||s.expires<=Date.now())?(this.remove(e),null):(s.expiresOnAccess&&s.expiresOnAccess===!0&&this.remove(e),s):null}set(e,t,s){const r=Date.now()+s,a={...t,expires:r};this.setCacheItem(e,a)}setCacheItem(e,t){const s=JSON.stringify(t);this.storage.set(e,s)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const s=await this.get(t);s&&e&&this.itemDueToExpire(s)&&await this.tryUpdateItem(t,s,e)})}async tryUpdateItem(e,t,s){try{const r=await s(t);r&&this.setCacheItem(e,r)}catch(r){console.error(r)}}}class Jt extends ut{constructor(){super(new Kt)}}class Kt{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class Wt extends ut{constructor(){super(new Yt)}}class Yt{constructor(){_(this,"cache",new Map)}get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}const _e=class _e{constructor(e,t){_(this,"clientId");_(this,"accessToken");_(this,"configuration",null);this.clientId=e,this.accessToken=t}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return this.accessToken=await this.cache.getOrCreate(_e.cacheKey,async()=>{const e=Q.toCachable(this.accessToken);return Promise.resolve(e)},async e=>Q.refreshCachedAccessToken(this.clientId,e)),this.accessToken}async getAccessToken(){return await this.cache.get(_e.cacheKey)}removeAccessToken(){this.cache.remove(_e.cacheKey)}};_(_e,"cacheKey","spotify-sdk:ProvidedAccessTokenStrategy:token");let ze=_e;const oe=class oe{constructor(e,t){_(this,"sdkConfig");_(this,"authenticationStrategy");_(this,"albums");_(this,"artists");_(this,"audiobooks");_(this,"browse");_(this,"chapters");_(this,"episodes");_(this,"recommendations");_(this,"markets");_(this,"player");_(this,"playlists");_(this,"shows");_(this,"tracks");_(this,"users");_(this,"search");_(this,"currentUser");this.sdkConfig=this.initilizeSdk(t),this.albums=new _t(this),this.artists=new bt(this),this.audiobooks=new Ct(this),this.browse=new $t(this),this.chapters=new xt(this),this.episodes=new Rt(this),this.recommendations=new Tt(this),this.markets=new Et(this),this.player=new St(this),this.playlists=new qt(this),this.shows=new At(this),this.tracks=new Pt(this),this.users=new It(this),this.currentUser=new Ut(this);const s=new Ft(this);this.search=s.execute.bind(s),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,s=void 0,r=void 0){try{const a=await this.authenticationStrategy.getOrCreateAccessToken(),i=a==null?void 0:a.access_token,u=oe.rootUrl+t,o={method:e,headers:{Authorization:`Bearer ${i}`,"Content-Type":r??"application/json"},body:s?typeof s=="string"?s:JSON.stringify(s):void 0};this.sdkConfig.beforeRequest(u,o);const l=await this.sdkConfig.fetch(u,o);return this.sdkConfig.afterRequest(u,o,l),l.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(l),this.sdkConfig.deserializer.deserialize(l))}catch(a){if(!await this.sdkConfig.errorHandler.handleErrors(a))throw a;return null}}initilizeSdk(e){const t=typeof window<"u";return{...{fetch:(r,a)=>fetch(r,a),beforeRequest:(r,a)=>{},afterRequest:(r,a,i)=>{},deserializer:new Mt,responseValidator:new Ht,errorHandler:new zt,redirectionStrategy:new Gt,cachingStrategy:t?new Jt:new Wt},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){return this.authenticationStrategy.getOrCreateAccessToken()}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,s=[],r){const a=new Ne(e,t,s);return new oe(a,r)}static withClientCredentials(e,t,s=[],r){const a=new Me(e,t,s);return new oe(a,r)}static withImplicitGrant(e,t,s=[],r){const a=new He(e,t,s);return new oe(a,r)}static withAccessToken(e,t,s){const r=new ze(e,t);return new oe(r,s)}static async performUserAuthorization(e,t,s,r,a){const i=new Ne(e,t,s),o=await new oe(i,a).authenticationStrategy.getOrCreateAccessToken();if(JSON.stringify({...o,expires:0})!==JSON.stringify(Ke)){if(typeof r=="string"){await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return}await r(o)}}};_(oe,"rootUrl","https://api.spotify.com/v1/");let Ge=oe;function Zt(n){let e,t,s;return t=new vt({props:{data:n[0],nodeStyle:n[2]}}),{c(){e=g("div"),fe(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=C(e);me(t.$$.fragment,a),a.forEach(y),this.h()},h(){f(e,"class","w-full h-full z-0")},m(r,a){L(r,e,a),ge(t,e,null),s=!0},p(r,a){const i={};a&1&&(i.data=r[0]),a&4&&(i.nodeStyle=r[2]),t.$set(i)},i(r){s||(O(t.$$.fragment,r),s=!0)},o(r){G(t.$$.fragment,r),s=!1},d(r){r&&y(e),we(t)}}}function Qt(n){let e,t,s,r=n[1].text+"",a,i,u,o,l,h;return{c(){e=g("div"),t=g("div"),s=g("p"),a=X(r),i=R(),u=g("progress"),this.h()},l(c){e=w(c,"DIV",{class:!0});var m=C(e);t=w(m,"DIV",{class:!0});var d=C(t);s=w(d,"P",{class:!0});var v=C(s);a=ee(v,r),v.forEach(y),i=T(d),u=w(d,"PROGRESS",{class:!0,max:!0}),C(u).forEach(y),d.forEach(y),m.forEach(y),this.h()},h(){f(s,"class","text-lg font-bold"),f(u,"class","progress w-56"),u.value=o=n[1].percentage,f(u,"max","100"),f(t,"class","text-center space-y-3"),f(e,"class","absolute top-0 left-0 z-10 w-screen h-screen flex justify-center items-center bg-base-100")},m(c,m){L(c,e,m),p(e,t),p(t,s),p(s,a),p(t,i),p(t,u),h=!0},p(c,m){(!h||m&2)&&r!==(r=c[1].text+"")&&pe(a,r),(!h||m&2&&o!==(o=c[1].percentage))&&(u.value=o)},i(c){h||(c&&ce(()=>{h&&(l||(l=re(e,ue,{delay:100,duration:500},!0)),l.run(1))}),h=!0)},o(c){c&&(l||(l=re(e,ue,{delay:100,duration:500},!1)),l.run(0)),h=!1},d(c){c&&y(e),c&&l&&l.end()}}}function Xt(n){let e,t,s,r;const a=[Qt,Zt],i=[];function u(o,l){return o[1]?0:1}return t=u(n),s=i[t]=a[t](n),{c(){e=g("div"),s.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var l=C(e);s.l(l),l.forEach(y),this.h()},h(){f(e,"class","relative")},m(o,l){L(o,e,l),i[t].m(e,null),r=!0},p(o,[l]){let h=t;t=u(o),t===h?i[t].p(o,l):(qe(),G(i[h],1,1,()=>{i[h]=null}),Fe(),s=i[t],s?s.p(o,l):(s=i[t]=a[t](o),s.c()),O(s,1),s.m(e,null))},i(o){r||(O(s),r=!0)},o(o){G(s),r=!1},d(o){o&&y(e),i[t].d()}}}function es(n,e,t){let s,r,a,i;se(n,Le,m=>t(4,s=m)),se(n,Ze,m=>t(0,r=m)),se(n,xe,m=>t(1,a=m)),se(n,Be,m=>t(2,i=m));let{sdk:u}=e;const o=async m=>{const d=m.map(F=>F.id),v=80/d.length;let k=[];for(const F of m){const P=await u.artists.relatedArtists(F.id);a&&le(xe,a.percentage+=v,a);for(const I of P.artists)d.includes(I.id)&&!k.includes({source:I.id,target:F.id})&&!k.includes({source:F.id,target:I.id})&&k.push({source:F.id,target:I.id})}return k},l=async m=>{var v,k;const d=(await u.currentUser.followedArtists(m,50)).artists;return(v=d==null?void 0:d.cursors)!=null&&v.after?d.items.concat(await l((k=d==null?void 0:d.cursors)==null?void 0:k.after)):d.items},h=async(m="short")=>{switch(m){case"short_term":case"medium_term":case"long_term":return(await u.currentUser.topItems("artists",m,50)).items;case"following":return await l();case"all":return(await h("short_term")).concat(await h("medium_term")).concat(await h("long_term")).concat(await h("following"));default:return h("medium_term")}},c=async m=>{try{le(xe,a={text:"Downloading Artists",percentage:10},a);const d=await h(m);le(xe,a={text:"Building Links",percentage:20},a);const v=await o(d);le(xe,a=null,a),le(Ze,r={nodes:d,links:v},r)}catch(d){le(Le,s=d,s)}};return Oe.subscribe(c),n.$$set=m=>{"sdk"in m&&t(3,u=m.sdk)},[r,a,i,u]}class ts extends Ae{constructor(e){super(),Pe(this,e,es,Xt,Se,{sdk:3})}}function ss(n){let e,t=n[0].display_name+"",s;return{c(){e=g("span"),s=X(t)},l(r){e=w(r,"SPAN",{});var a=C(e);s=ee(a,t),a.forEach(y)},m(r,a){L(r,e,a),p(e,s)},p(r,a){a&1&&t!==(t=r[0].display_name+"")&&pe(s,t)},d(r){r&&y(e)}}}function rs(n){let e,t;return{c(){e=g("img"),this.h()},l(s){e=w(s,"IMG",{src:!0,alt:!0}),this.h()},h(){var s;We(e.src,t=(s=n[0].images)==null?void 0:s.slice(-1)[0].url)||f(e,"src",t),f(e,"alt","profile")},m(s,r){L(s,e,r)},p(s,r){var a;r&1&&!We(e.src,t=(a=s[0].images)==null?void 0:a.slice(-1)[0].url)&&f(e,"src",t)},d(s){s&&y(e)}}}function as(n){let e,t,s,r,a,i,u;function o(c,m){var d,v;return((v=(d=c[0])==null?void 0:d.images)==null?void 0:v.length)>0?rs:ss}let l=o(n),h=l(n);return{c(){e=g("div"),t=g("div"),s=g("a"),h.c(),this.h()},l(c){e=w(c,"DIV",{class:!0,"data-tip":!0});var m=C(e);t=w(m,"DIV",{class:!0});var d=C(t);s=w(d,"A",{class:!0,href:!0,target:!0,rel:!0});var v=C(s);h.l(v),v.forEach(y),d.forEach(y),m.forEach(y),this.h()},h(){f(s,"class","w-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2 overflow-hidden"),f(s,"href",r=n[0].external_urls.spotify),f(s,"target","_blank"),f(s,"rel","noreferrer noopener"),f(t,"class","avatar"),f(e,"class","tooltip tooltip-bottom select-none"),f(e,"data-tip",a=n[0].display_name)},m(c,m){L(c,e,m),p(e,t),p(t,s),h.m(s,null),u=!0},p(c,[m]){l===(l=o(c))&&h?h.p(c,m):(h.d(1),h=l(c),h&&(h.c(),h.m(s,null))),(!u||m&1&&r!==(r=c[0].external_urls.spotify))&&f(s,"href",r),(!u||m&1&&a!==(a=c[0].display_name))&&f(e,"data-tip",a)},i(c){u||(c&&ce(()=>{u&&(i||(i=re(e,ue,{duration:400},!0)),i.run(1))}),u=!0)},o(c){c&&(i||(i=re(e,ue,{duration:400},!1)),i.run(0)),u=!1},d(c){c&&y(e),h.d(),c&&i&&i.end()}}}function ns(n,e,t){let{profile:s}=e;return n.$$set=r=>{"profile"in r&&t(0,s=r.profile)},[s]}class os extends Ae{constructor(e){super(),Pe(this,e,ns,as,Se,{profile:0})}}function et(n){let e,t,s,r,a="Color by Popularity",i,u,o,l,h,c,m,d=n[3]&&tt();return{c(){e=g("div"),t=g("div"),s=g("label"),r=g("span"),r.textContent=a,i=R(),u=g("input"),o=R(),d&&d.c(),this.h()},l(v){e=w(v,"DIV",{class:!0});var k=C(e);t=w(k,"DIV",{class:!0});var F=C(t);s=w(F,"LABEL",{class:!0});var P=C(s);r=w(P,"SPAN",{class:!0,"data-svelte-h":!0}),j(r)!=="svelte-1w1k44k"&&(r.textContent=a),i=T(P),u=w(P,"INPUT",{type:!0,class:!0}),P.forEach(y),F.forEach(y),o=T(k),d&&d.l(k),k.forEach(y),this.h()},h(){f(r,"class","label-text"),f(u,"type","checkbox"),f(u,"class","checkbox"),f(s,"class","label cursor-pointer"),f(t,"class","form-control"),f(e,"class","flex flex-col")},m(v,k){L(v,e,k),p(e,t),p(t,s),p(s,r),p(s,i),p(s,u),u.checked=n[3],p(e,o),d&&d.m(e,null),h=!0,c||(m=Ee(u,"change",n[6]),c=!0)},p(v,k){k&8&&(u.checked=v[3]),v[3]?d?k&8&&O(d,1):(d=tt(),d.c(),O(d,1),d.m(e,null)):d&&(qe(),G(d,1,1,()=>{d=null}),Fe())},i(v){h||(O(d),v&&ce(()=>{h&&(l||(l=re(e,ue,{},!0)),l.run(1))}),h=!0)},o(v){G(d),v&&(l||(l=re(e,ue,{},!1)),l.run(0)),h=!1},d(v){v&&y(e),d&&d.d(),v&&l&&l.end(),c=!1,m()}}}function tt(n){let e,t='<p class="text-left">Less Popular</p> <p class="text-right">More Popular</p>',s,r;return{c(){e=g("div"),e.innerHTML=t,this.h()},l(a){e=w(a,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-17ane3m"&&(e.innerHTML=t),this.h()},h(){f(e,"class","inline-grid mx-1 flex-grow grid-cols-2 px-3 py-1 text-xs md:text-base text-white rounded-md shadow-md bg-gradient-to-r from-[#15803d] via-[#7e22ce] to-[#be185d]")},m(a,i){L(a,e,i),r=!0},i(a){r||(a&&ce(()=>{r&&(s||(s=re(e,je,{y:-4},!0)),s.run(1))}),r=!0)},o(a){a&&(s||(s=re(e,je,{y:-4},!1)),s.run(0)),r=!1},d(a){a&&y(e),a&&s&&s.end()}}}function is(n){let e,t,s,r,a,i="Preferences",u,o,l,h="Top of The Past Month",c,m="Top of The Past Year",d,v="Top of All Time",k,F="Following",P,I="All Available",J,U,M,Z="View as Dots",E,S="View as Pictures",$,x="View as Names",H,Y,q,K,D,N="Log Out",ae,te,Ce='<i>© 2023 Grant Handy · <a href="/LICENSE.txt" class="link" target="_blank" rel="noreferrer noopener">License</a></i>',de,$e,A=n[2]!=Re.Picture&&et(n);return{c(){e=g("div"),t=g("label"),s=R(),r=g("div"),a=g("h1"),a.textContent=i,u=R(),o=g("select"),l=g("option"),l.textContent=h,c=g("option"),c.textContent=m,d=g("option"),d.textContent=v,k=g("option"),k.textContent=F,P=g("option"),P.textContent=I,J=R(),U=g("select"),M=g("option"),M.textContent=Z,E=g("option"),E.textContent=S,$=g("option"),$.textContent=x,H=R(),A&&A.c(),Y=R(),q=g("div"),K=R(),D=g("button"),D.textContent=N,ae=R(),te=g("p"),te.innerHTML=Ce,this.h()},l(z){e=w(z,"DIV",{class:!0});var W=C(e);t=w(W,"LABEL",{for:!0,class:!0}),C(t).forEach(y),s=T(W),r=w(W,"DIV",{class:!0});var B=C(r);a=w(B,"H1",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-n7an2l"&&(a.textContent=i),u=T(B),o=w(B,"SELECT",{class:!0});var ne=C(o);l=w(ne,"OPTION",{"data-svelte-h":!0}),j(l)!=="svelte-18ovyn3"&&(l.textContent=h),c=w(ne,"OPTION",{"data-svelte-h":!0}),j(c)!=="svelte-1s4lgcp"&&(c.textContent=m),d=w(ne,"OPTION",{"data-svelte-h":!0}),j(d)!=="svelte-t59ye6"&&(d.textContent=v),k=w(ne,"OPTION",{"data-svelte-h":!0}),j(k)!=="svelte-1utbkqg"&&(k.textContent=F),P=w(ne,"OPTION",{"data-svelte-h":!0}),j(P)!=="svelte-1p6vrpt"&&(P.textContent=I),ne.forEach(y),J=T(B),U=w(B,"SELECT",{class:!0});var he=C(U);M=w(he,"OPTION",{"data-svelte-h":!0}),j(M)!=="svelte-1ru6mvb"&&(M.textContent=Z),E=w(he,"OPTION",{"data-svelte-h":!0}),j(E)!=="svelte-hpqvnh"&&(E.textContent=S),$=w(he,"OPTION",{"data-svelte-h":!0}),j($)!=="svelte-1arngzx"&&($.textContent=x),he.forEach(y),H=T(B),A&&A.l(B),Y=T(B),q=w(B,"DIV",{class:!0}),C(q).forEach(y),K=T(B),D=w(B,"BUTTON",{class:!0,"data-svelte-h":!0}),j(D)!=="svelte-11tytfz"&&(D.textContent=N),ae=T(B),te=w(B,"P",{class:!0,"data-svelte-h":!0}),j(te)!=="svelte-g4e2e5"&&(te.innerHTML=Ce),B.forEach(y),W.forEach(y),this.h()},h(){f(t,"for","my-drawer"),f(t,"class","drawer-overlay"),f(a,"class","text-xl"),l.__value=Te.ShortTerm,ie(l,l.__value),c.__value=Te.MediumTerm,ie(c,c.__value),d.__value=Te.LongTerm,ie(d,d.__value),k.__value=Te.Following,ie(k,k.__value),P.__value=Te.All,ie(P,P.__value),f(o,"class","select select-bordered w-full"),n[1]===void 0&&ce(()=>n[4].call(o)),M.__value=Re.Dot,ie(M,M.__value),E.__value=Re.Picture,ie(E,E.__value),$.__value=Re.Text,ie($,$.__value),f(U,"class","select select-bordered w-full"),n[2]===void 0&&ce(()=>n[5].call(U)),f(q,"class","flex-grow"),f(D,"class","btn btn-primary"),f(te,"class","text-xs text-center"),f(r,"class","menu p-4 w-64 md:w-80 h-full bg-base-200 text-base-content space-y-2 flex flex-col bg-secondary-content"),f(e,"class","drawer-side z-50")},m(z,W){L(z,e,W),p(e,t),p(e,s),p(e,r),p(r,a),p(r,u),p(r,o),p(o,l),p(o,c),p(o,d),p(o,k),p(o,P),Ue(o,n[1],!0),p(r,J),p(r,U),p(U,M),p(U,E),p(U,$),Ue(U,n[2],!0),p(r,H),A&&A.m(r,null),p(r,Y),p(r,q),p(r,K),p(r,D),p(r,ae),p(r,te),de||($e=[Ee(o,"change",n[4]),Ee(U,"change",n[5]),Ee(D,"click",n[7])],de=!0)},p(z,[W]){W&2&&Ue(o,z[1]),W&4&&Ue(U,z[2]),z[2]!=Re.Picture?A?(A.p(z,W),W&4&&O(A,1)):(A=et(z),A.c(),O(A,1),A.m(r,Y)):A&&(qe(),G(A,1,1,()=>{A=null}),Fe())},i(z){O(A)},o(z){G(A)},d(z){z&&y(e),A&&A.d(),de=!1,gt($e)}}}function ls(n,e,t){let s,r,a;se(n,Oe,c=>t(1,s=c)),se(n,Be,c=>t(2,r=c)),se(n,Qe,c=>t(3,a=c));let{sdk:i}=e;function u(){s=Ye(this),Oe.set(s)}function o(){r=Ye(this),Be.set(r)}function l(){a=this.checked,Qe.set(a)}const h=()=>{i.logOut(),localStorage.clear(),window.location.href="/"};return n.$$set=c=>{"sdk"in c&&t(0,i=c.sdk)},[i,s,r,a,u,o,l,h]}class cs extends Ae{constructor(e){super(),Pe(this,e,ls,is,Se,{sdk:0})}}function st(n,e,t){const s=n.slice();return s[6]=e[t],s}function rt(n,e,t){const s=n.slice();return s[9]=e[t],s}function at(n){let e,t,s,r,a,i,u,o=n[0].name+"",l,h,c,m,d,v,k,F,P,I,J,U,M=n[0].popularity+"",Z,E,S,$,x,H,Y,q=n[0].genres.length>0&&nt(n),K={ctx:n,current:null,token:null,hasCatch:!1,pending:ps,then:hs,catch:us,value:5};return Ve(F=n[1](n[0]),K),{c(){e=g("div"),t=g("input"),s=R(),r=g("div"),a=g("div"),i=g("div"),u=g("h2"),l=X(o),c=R(),m=g("div"),d=g("div"),v=g("div"),q&&q.c(),k=R(),K.block.c(),P=R(),I=g("div"),J=g("p"),U=X("Popularity: "),Z=X(M),E=X("%"),S=R(),$=g("p"),x=g("a"),H=X("Visit"),this.h()},l(D){e=w(D,"DIV",{class:!0});var N=C(e);t=w(N,"INPUT",{type:!0}),s=T(N),r=w(N,"DIV",{class:!0});var ae=C(r);a=w(ae,"DIV",{class:!0,style:!0});var te=C(a);i=w(te,"DIV",{class:!0});var Ce=C(i);u=w(Ce,"H2",{class:!0});var de=C(u);l=ee(de,o),de.forEach(y),Ce.forEach(y),te.forEach(y),ae.forEach(y),c=T(N),m=w(N,"DIV",{class:!0});var $e=C(m);d=w($e,"DIV",{class:!0});var A=C(d);v=w(A,"DIV",{class:!0});var z=C(v);q&&q.l(z),k=T(z),K.block.l(z),z.forEach(y),P=T(A),I=w(A,"DIV",{class:!0});var W=C(I);J=w(W,"P",{class:!0});var B=C(J);U=ee(B,"Popularity: "),Z=ee(B,M),E=ee(B,"%"),B.forEach(y),S=T(W),$=w(W,"P",{class:!0});var ne=C($);x=w(ne,"A",{href:!0,class:!0,target:!0,rel:!0});var he=C(x);H=ee(he,"Visit"),he.forEach(y),ne.forEach(y),W.forEach(y),A.forEach(y),$e.forEach(y),N.forEach(y),this.h()},h(){var D;f(t,"type","checkbox"),f(u,"class","card-title text-left"),f(i,"class","backdrop-brightness-50 p-4 w-full space-y-2 flex items-center"),f(a,"class","rounded-t-xl w-full text-white bg-cover bg-center"),f(a,"style",h=`background-image: url(${(D=n[0].images[0])==null?void 0:D.url})`),f(r,"class","collapse-title p-0"),f(v,"class","space-y-2"),f(J,"class","text-left float-left"),f(x,"href",Y=n[0].external_urls.spotify),f(x,"class","link"),f(x,"target","_blank"),f(x,"rel","noreferrer noopener"),f($,"class","text-right float-right"),f(I,"class","w-full flow-root"),f(d,"class","pt-3 text-xs md:text-sm space-y-3"),f(m,"class","collapse-content"),f(e,"class","z-20 absolute top-4 left-4 w-48 md:w-64 collapse shadow-2xl rounded-xl bg-neutral text-neutral-content")},m(D,N){L(D,e,N),p(e,t),p(e,s),p(e,r),p(r,a),p(a,i),p(i,u),p(u,l),p(e,c),p(e,m),p(m,d),p(d,v),q&&q.m(v,null),p(v,k),K.block.m(v,K.anchor=null),K.mount=()=>v,K.anchor=null,p(d,P),p(d,I),p(I,J),p(J,U),p(J,Z),p(J,E),p(I,S),p(I,$),p($,x),p(x,H)},p(D,N){var ae;n=D,N&1&&o!==(o=n[0].name+"")&&pe(l,o),N&1&&h!==(h=`background-image: url(${(ae=n[0].images[0])==null?void 0:ae.url})`)&&f(a,"style",h),n[0].genres.length>0?q?q.p(n,N):(q=nt(n),q.c(),q.m(v,k)):q&&(q.d(1),q=null),K.ctx=n,N&1&&F!==(F=n[1](n[0]))&&Ve(F,K)||Je(K,n,N),N&1&&M!==(M=n[0].popularity+"")&&pe(Z,M),N&1&&Y!==(Y=n[0].external_urls.spotify)&&f(x,"href",Y)},d(D){D&&y(e),q&&q.d(),K.block.d(),K.token=null,K=null}}}function nt(n){let e,t,s="Genres",r,a,i=De(n[0].genres.slice(0,8)),u=[];for(let o=0;o<i.length;o+=1)u[o]=ot(rt(n,i,o));return{c(){e=g("div"),t=g("h3"),t.textContent=s,r=R(),a=g("ol");for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){e=w(o,"DIV",{});var l=C(e);t=w(l,"H3",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1epgqft"&&(t.textContent=s),r=T(l),a=w(l,"OL",{class:!0});var h=C(a);for(let c=0;c<u.length;c+=1)u[c].l(h);h.forEach(y),l.forEach(y),this.h()},h(){f(t,"class","text-sm md:text-lg font-semibold ml-1"),f(a,"class","list-disc ml-3")},m(o,l){L(o,e,l),p(e,t),p(e,r),p(e,a);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(a,null)},p(o,l){if(l&1){i=De(o[0].genres.slice(0,8));let h;for(h=0;h<i.length;h+=1){const c=rt(o,i,h);u[h]?u[h].p(c,l):(u[h]=ot(c),u[h].c(),u[h].m(a,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=i.length}},d(o){o&&y(e),ct(u,o)}}}function ot(n){let e,t=n[9]+"",s;return{c(){e=g("li"),s=X(t)},l(r){e=w(r,"LI",{});var a=C(e);s=ee(a,t),a.forEach(y)},m(r,a){L(r,e,a),p(e,s)},p(r,a){a&1&&t!==(t=r[9]+"")&&pe(s,t)},d(r){r&&y(e)}}}function us(n){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function hs(n){let e,t,s="Top Tracks",r,a,i,u=De(n[5]),o=[];for(let l=0;l<u.length;l+=1)o[l]=it(st(n,u,l));return{c(){e=g("div"),t=g("h3"),t.textContent=s,r=R(),a=g("ol");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=w(l,"DIV",{});var h=C(e);t=w(h,"H3",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1fltes8"&&(t.textContent=s),r=T(h),a=w(h,"OL",{class:!0});var c=C(a);for(let m=0;m<o.length;m+=1)o[m].l(c);c.forEach(y),h.forEach(y),this.h()},h(){f(t,"class","text-sm md:text-lg font-semibold ml-1"),f(a,"class","list-decimal ml-3")},m(l,h){L(l,e,h),p(e,t),p(e,r),p(e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(a,null)},p(l,h){if(h&3){u=De(l[5]);let c;for(c=0;c<u.length;c+=1){const m=st(l,u,c);o[c]?o[c].p(m,h):(o[c]=it(m),o[c].c(),o[c].m(a,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=u.length}},i(l){l&&(i||ce(()=>{i=wt(e,je,{y:-2}),i.start()}))},o:b,d(l){l&&y(e),ct(o,l)}}}function it(n){let e,t,s=n[6].name+"",r,a,i,u;return{c(){e=g("li"),t=g("a"),r=X(s),a=X(" ►"),u=R(),this.h()},l(o){e=w(o,"LI",{class:!0});var l=C(e);t=w(l,"A",{href:!0,target:!0,rel:!0});var h=C(t);r=ee(h,s),a=ee(h," ►"),h.forEach(y),u=T(l),l.forEach(y),this.h()},h(){f(t,"href",i=n[6].external_urls.spotify),f(t,"target","_blank"),f(t,"rel","noreferrer noopener"),f(e,"class","link")},m(o,l){L(o,e,l),p(e,t),p(t,r),p(t,a),p(e,u)},p(o,l){l&1&&s!==(s=o[6].name+"")&&pe(r,s),l&1&&i!==(i=o[6].external_urls.spotify)&&f(t,"href",i)},d(o){o&&y(e)}}}function ps(n){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function ds(n){let e,t=n[0]&&at(n);return{c(){t&&t.c(),e=be()},l(s){t&&t.l(s),e=be()},m(s,r){t&&t.m(s,r),L(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=at(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:b,o:b,d(s){s&&y(e),t&&t.d(s)}}}function fs(n,e,t){let s,r;se(n,Xe,o=>t(0,s=o)),se(n,Oe,o=>t(3,r=o));let{sdk:a}=e,i=[];const u=async o=>{if(i.filter(l=>l.id===o.id).length>0)return i.filter(l=>l.id===o.id)[0].top;{const l=await a.artists.topTracks(o.id,"US").then(h=>h.tracks);return i.push({id:o.id,top:l}),l}};return n.$$set=o=>{"sdk"in o&&t(2,a=o.sdk)},n.$$.update=()=>{n.$$.dirty&8&&r&&le(Xe,s=null,s)},[s,u,a,r]}class ms extends Ae{constructor(e){super(),Pe(this,e,fs,ds,Se,{sdk:2})}}function gs(n){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function ws(n){let e,t,s=n[3]&&ys(n);return{c(){s&&s.c(),e=be()},l(r){s&&s.l(r),e=be()},m(r,a){s&&s.m(r,a),L(r,e,a),t=!0},p(r,a){r[3]&&s.p(r,a)},i(r){t||(O(s),t=!0)},o(r){G(s),t=!1},d(r){r&&y(e),s&&s.d(r)}}}function ys(n){let e,t,s,r,a,i,u,o,l,h,c,m,d,v,k,F='<input type="checkbox" class="drawer-toggle"/> <svg class="swap-off fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path></svg> <svg class="swap-on fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"></polygon></svg>',P,I,J,U,M=`html,
			body {
				height: 100%;
			}`,Z;a=new ts({props:{sdk:n[1]}}),u=new ms({props:{sdk:n[1]}});let E={ctx:n,current:null,token:null,hasCatch:!1,pending:_s,then:ks,catch:vs,value:4,blocks:[,,,]};Ve(n[1].currentUser.profile(),E),c=new kt({});let S=n[0]&&lt(n);return I=new cs({props:{sdk:n[1]}}),{c(){e=g("div"),t=g("input"),s=R(),r=g("div"),fe(a.$$.fragment),i=R(),fe(u.$$.fragment),o=R(),l=g("div"),E.block.c(),h=R(),fe(c.$$.fragment),m=R(),d=g("div"),S&&S.c(),v=R(),k=g("label"),k.innerHTML=F,P=R(),fe(I.$$.fragment),J=R(),U=g("style"),U.textContent=M,this.h()},l($){e=w($,"DIV",{class:!0});var x=C(e);t=w(x,"INPUT",{id:!0,type:!0,class:!0}),s=T(x),r=w(x,"DIV",{class:!0});var H=C(r);me(a.$$.fragment,H),i=T(H),me(u.$$.fragment,H),o=T(H),l=w(H,"DIV",{class:!0});var Y=C(l);E.block.l(Y),h=T(Y),me(c.$$.fragment,Y),Y.forEach(y),m=T(H),d=w(H,"DIV",{class:!0});var q=C(d);S&&S.l(q),v=T(q),k=w(q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(k)!=="svelte-dqe3jr"&&(k.innerHTML=F),q.forEach(y),H.forEach(y),P=T(x),me(I.$$.fragment,x),x.forEach(y),J=T($),U=w($,"STYLE",{"data-svelte-h":!0}),j(U)!=="svelte-1jgjf0a"&&(U.textContent=M),this.h()},h(){f(t,"id","my-drawer"),f(t,"type","checkbox"),f(t,"class","drawer-toggle"),f(l,"class","z-20 absolute top-0 right-0 pt-4 pr-4 flex flex-col items-end space-y-3"),f(k,"class","btn btn-circle btn-primary swap swap-rotate"),f(k,"for","my-drawer"),f(d,"class","z-20 absolute bottom-0 right-0 pr-4 pb-4 flex flex-col items-end space-y-3"),f(r,"class","drawer-content relative"),f(e,"class","drawer")},m($,x){L($,e,x),p(e,t),p(e,s),p(e,r),ge(a,r,null),p(r,i),ge(u,r,null),p(r,o),p(r,l),E.block.m(l,E.anchor=null),E.mount=()=>l,E.anchor=h,p(l,h),ge(c,l,null),p(r,m),p(r,d),S&&S.m(d,null),p(d,v),p(d,k),p(e,P),ge(I,e,null),L($,J,x),L($,U,x),Z=!0},p($,x){n=$,Je(E,n,x),n[0]?S?(S.p(n,x),x&1&&O(S,1)):(S=lt(n),S.c(),O(S,1),S.m(d,v)):S&&(qe(),G(S,1,1,()=>{S=null}),Fe())},i($){Z||(O(a.$$.fragment,$),O(u.$$.fragment,$),O(E.block),O(c.$$.fragment,$),O(S),O(I.$$.fragment,$),Z=!0)},o($){G(a.$$.fragment,$),G(u.$$.fragment,$);for(let x=0;x<3;x+=1){const H=E.blocks[x];G(H)}G(c.$$.fragment,$),G(S),G(I.$$.fragment,$),Z=!1},d($){$&&(y(e),y(J),y(U)),we(a),we(u),E.block.d(),E.token=null,E=null,we(c),S&&S.d(),we(I)}}}function vs(n){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function ks(n){let e,t;return e=new os({props:{profile:n[4]}}),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,r){ge(e,s,r),t=!0},p:b,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function _s(n){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function lt(n){let e,t,s,r="Error:",a,i,u,o,l='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h,c,m,d;return{c(){e=g("div"),t=g("span"),s=g("span"),s.textContent=r,a=R(),i=X(n[0]),u=R(),o=g("button"),o.innerHTML=l,this.h()},l(v){e=w(v,"DIV",{class:!0});var k=C(e);t=w(k,"SPAN",{class:!0});var F=C(t);s=w(F,"SPAN",{class:!0,"data-svelte-h":!0}),j(s)!=="svelte-13bpzm2"&&(s.textContent=r),a=T(F),i=ee(F,n[0]),F.forEach(y),u=T(k),o=w(k,"BUTTON",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-i1tfpz"&&(o.innerHTML=l),k.forEach(y),this.h()},h(){f(s,"class","font-bold"),f(t,"class","float-left"),f(o,"class","float-right"),f(e,"class","alert alert-error flow-root space-x-3")},m(v,k){L(v,e,k),p(e,t),p(t,s),p(t,a),p(t,i),p(e,u),p(e,o),c=!0,m||(d=Ee(o,"click",n[2]),m=!0)},p(v,k){(!c||k&1)&&pe(i,v[0])},i(v){c||(v&&ce(()=>{c&&(h||(h=re(e,ue,{duration:200},!0)),h.run(1))}),c=!0)},o(v){v&&(h||(h=re(e,ue,{duration:200},!1)),h.run(0)),c=!1},d(v){v&&y(e),v&&h&&h.end(),m=!1,d()}}}function bs(n){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function Cs(n){let e,t,s,r={ctx:n,current:null,token:null,hasCatch:!1,pending:bs,then:ws,catch:gs,value:3,blocks:[,,,]};return Ve(n[1].authenticate(),r),{c(){e=R(),t=be(),r.block.c(),this.h()},l(a){yt("svelte-ijsdg2",document.head).forEach(y),e=T(a),t=be(),r.block.l(a),this.h()},h(){document.title="Artist Constellations - Dashboard"},m(a,i){L(a,e,i),L(a,t,i),r.block.m(a,r.anchor=i),r.mount=()=>t.parentNode,r.anchor=t,s=!0},p(a,[i]){n=a,Je(r,n,i)},i(a){s||(O(r.block),s=!0)},o(a){for(let i=0;i<3;i+=1){const u=r.blocks[i];G(u)}s=!1},d(a){a&&(y(e),y(t)),r.block.d(a),r.token=null,r=null}}}function $s(n,e,t){let s;se(n,Le,i=>t(0,s=i));const r=Ge.withUserAuthorization("2ed0e6e8b06842fb854cb15e1690a7b5",window.location.origin+"/dashboard",["user-follow-read","user-top-read"]);return[s,r,()=>le(Le,s=null,s)]}class Ss extends Ae{constructor(e){super(),Pe(this,e,$s,Cs,Se,{})}}export{Ss as component};
