var ht=Object.defineProperty;var pt=(n,e,t)=>e in n?ht(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var k=(n,e,t)=>(pt(n,typeof e!="symbol"?e+"":e,t),t);import{i as dt,f as ft,h as Pe,j as mt,s as Ee,e as se,k as le,l as ce,m as Je,r as gt,n as $}from"../chunks/scheduler.1d9bef59.js";import{p as Se,t as W,b as qe,d as j,S as Fe,i as Ae,g as w,h as y,j as b,f as v,k as d,a as G,r as fe,u as me,v as ge,w as we,m as X,s as E,n as ee,c as S,x as p,o as pe,A as re,z,B as ie,C as Ie,D as Te,E as Ke,e as We,F as lt,G as wt,y as yt}from"../chunks/index.663da7e1.js";import{g as Ue,a as Ze,l as $e,n as De,b as Oe,G as vt,f as ue,N as xe,c as Re,d as Qe,e as Ne,h as Ye,T as kt}from"../chunks/ThemeSwitcher.e7b8e11a.js";function Be(n,e){const t=e.token={};function s(r,a,l,h){if(e.token!==t)return;e.resolved=h;let o=e.ctx;l!==void 0&&(o=o.slice(),o[l]=h);const i=r&&(e.current=r)(o);let c=!1;e.block&&(e.blocks?e.blocks.forEach((u,f)=>{f!==a&&u&&(Se(),W(u,1,1,()=>{e.blocks[f]===u&&(e.blocks[f]=null)}),qe())}):e.block.d(1),i.c(),j(i,1),i.m(e.mount(),e.anchor),c=!0),e.block=i,e.blocks&&(e.blocks[a]=i),c&&mt()}if(dt(n)){const r=ft();if(n.then(a=>{Pe(r),s(e.then,1,e.value,a),Pe(null)},a=>{if(Pe(r),s(e.catch,2,e.error,a),Pe(null),!e.hasCatch)throw a}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,n),!0;e.resolved=n}}function ct(n,e,t){const s=e.slice(),{resolved:r}=n;n.current===n.then&&(s[n.value]=r),n.current===n.catch&&(s[n.error]=r),n.block.p(s,t)}function Le(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class O{constructor(e){k(this,"api");this.api=e}async getRequest(e){return await this.api.makeRequest("GET",e)}async postRequest(e,t,s=void 0){return await this.api.makeRequest("POST",e,t,s)}async putRequest(e,t,s=void 0){return await this.api.makeRequest("PUT",e,t,s)}async deleteRequest(e,t){return await this.api.makeRequest("DELETE",e,t)}paramsFor(e){const t=new URLSearchParams;for(let s of Object.getOwnPropertyNames(e))(e[s]||!e[s]&&typeof e[s]=="boolean")&&t.append(s,e[s].toString());return[...t].length>0?`?${t.toString()}`:""}}class _t extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return await this.getRequest(`albums/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`albums${s}`)).albums}tracks(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`albums/${e}/tracks${a}`)}}class bt extends O{async get(e){if(typeof e=="string")return this.getRequest(`artists/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`artists${t}`)).artists}albums(e,t,s,r,a){const l=this.paramsFor({include_groups:t,market:s,limit:r,offset:a});return this.getRequest(`artists/${e}/albums${l}`)}topTracks(e,t){const s=this.paramsFor({market:t});return this.getRequest(`artists/${e}/top-tracks${s}`)}relatedArtists(e){return this.getRequest(`artists/${e}/related-artists`)}}class Ct extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`audiobooks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`audiobooks${s}`)).audiobooks}getAudiobookChapters(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`audiobooks/${e}/chapters${a}`)}}class $t extends O{getCategories(e,t,s,r){const a=this.paramsFor({country:e,locale:t,limit:s,offset:r});return this.getRequest(`browse/categories${a}`)}getCategory(e,t,s){const r=this.paramsFor({country:t,locale:s});return this.getRequest(`browse/categories/${e}${r}`)}getNewReleases(e,t,s){const r=this.paramsFor({country:e,limit:t,offset:s});return this.getRequest(`browse/new-releases${r}`)}getFeaturedPlaylists(e,t,s,r,a){const l=this.paramsFor({country:e,locale:t,timestamp:s,limit:r,offset:a});return this.getRequest(`browse/featured-playlists${l}`)}getPlaylistsForCategory(e,t,s,r){const a=this.paramsFor({country:t,limit:s,offset:r});return this.getRequest(`browse/categories/${e}/playlists${a}`)}}class xt extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`chapters/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`chapters${s}`)).chapters}}class Rt extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`episodes/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`episodes${s}`)).episodes}}class Tt extends O{get(e){const t=this.paramsFor(e);return this.getRequest(`recommendations${t}`)}genreSeeds(){return this.getRequest("recommendations/available-genre-seeds")}}class Et extends O{getAvailableMarkets(){return this.getRequest("markets")}}class St extends O{getPlaybackState(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player${s}`)}getAvailableDevices(){return this.getRequest("me/player/devices")}getCurrentlyPlayingTrack(e,t){const s=this.paramsFor({market:e,additionalTypes:t});return this.getRequest(`me/player/currently-playing${s}`)}getRecentlyPlayedTracks(e,t){const s={limit:e};t&&(t.type==="before"?s.before=t.timestamp:t.type==="after"&&(s.after=t.timestamp));const r=this.paramsFor(s);return this.getRequest(`me/player/recently-played${r}`)}getUsersQueue(){return this.getRequest("me/player/queue")}async transferPlayback(e,t){if(e.length>1)throw new Error("Although an array is accepted, only a single device_id is currently supported. Supplying more than one will return 400 Bad Request");await this.putRequest("me/player",{device_ids:e,play:t})}async startResumePlayback(e,t,s,r,a){const l=this.paramsFor({device_id:e});await this.putRequest(`me/player/play${l}`,{context_uri:t,uris:s,offset:r,positionMs:a})}async pausePlayback(e){const t=this.paramsFor({device_id:e});await this.putRequest(`me/player/pause${t}`)}async skipToNext(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/next${t}`)}async skipToPrevious(e){const t=this.paramsFor({device_id:e});await this.postRequest(`me/player/previous${t}`)}async seekToPosition(e,t){const s=this.paramsFor({position_ms:e,device_id:t});await this.putRequest(`me/player/seek${s}`)}async setRepeatMode(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/repeat${s}`)}async setPlaybackVolume(e,t){const s=this.paramsFor({volume_percent:e,device_id:t});await this.putRequest(`me/player/volume${s}`)}async togglePlaybackShuffle(e,t){const s=this.paramsFor({state:e,device_id:t});await this.putRequest(`me/player/shuffle${s}`)}async addItemToPlaybackQueue(e,t){const s=this.paramsFor({uri:e,device_id:t});await this.postRequest(`me/player/queue${s}`)}}class qt extends O{getPlaylist(e,t,s,r){const a=this.paramsFor({market:t,fields:s,additional_types:r});return this.getRequest(`playlists/${e}${a}`)}getPlaylistItems(e,t,s,r,a,l){const h=this.paramsFor({market:t,fields:s,limit:r,offset:a,additional_types:l});return this.getRequest(`playlists/${e}/tracks${h}`)}async changePlaylistDetails(e,t){await this.putRequest(`playlists/${e}`,t)}movePlaylistItems(e,t,s,r){return this.updatePlaylistItems(e,{range_start:t,range_length:s,insert_before:r})}updatePlaylistItems(e,t){return this.putRequest(`playlists/${e}/tracks`,t)}async addItemsToPlaylist(e,t,s){await this.postRequest(`playlists/${e}/tracks`,{position:s,uris:t})}async removeItemsFromPlaylist(e,t){await this.deleteRequest(`playlists/${e}/tracks`,t)}getUsersPlaylists(e,t,s){const r=this.paramsFor({limit:t,offset:s});return this.getRequest(`users/${e}/playlists${r}`)}createPlaylist(e,t){return this.postRequest(`users/${e}/playlists`,t)}getPlaylistCoverImage(e){return this.getRequest(`playlists/${e}/images`)}async addCustomPlaylistCoverImage(e,t){let s="";if(t instanceof Buffer)s=t.toString("base64");else if(t instanceof HTMLCanvasElement)s=t.toDataURL("image/jpeg").split(";base64,")[1];else if(t instanceof HTMLImageElement){const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const a=r.getContext("2d");if(!a)throw new Error("Could not get canvas context");a.drawImage(t,0,0),s=r.toDataURL("image/jpeg").split(";base64,")[1]}else if(typeof t=="string")s=t;else throw new Error("ImageData must be a Buffer, HTMLImageElement, HTMLCanvasElement, or string containing a base64 encoded jpeg");await this.addCustomPlaylistCoverImageFromBase64String(e,s)}async addCustomPlaylistCoverImageFromBase64String(e,t){await this.putRequest(`playlists/${e}/images`,t,"image/jpeg")}}class Ft extends O{async execute(e,t,s,r,a,l){const h=this.paramsFor({q:e,type:t,market:s,limit:r,offset:a,include_external:l});return await this.getRequest(`search${h}`)}}class At extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`shows/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`shows${s}`)).shows}episodes(e,t,s,r){const a=this.paramsFor({market:t,limit:s,offset:r});return this.getRequest(`shows/${e}/episodes${a}`)}}class Pt extends O{async get(e,t){if(typeof e=="string"){const a=this.paramsFor({market:t});return this.getRequest(`tracks/${e}${a}`)}const s=this.paramsFor({ids:e,market:t});return(await this.getRequest(`tracks${s}`)).tracks}async audioFeatures(e){if(typeof e=="string")return this.getRequest(`audio-features/${e}`);const t=this.paramsFor({ids:e});return(await this.getRequest(`audio-features${t}`)).audio_features}audioAnalysis(e){return this.getRequest(`audio-analysis/${e}`)}}const Ge={access_token:"",token_type:"",expires_in:0,refresh_token:"",expires:0};class It extends O{profile(e){return this.getRequest(`users/${e}`)}}class Ut extends O{constructor(t){super(t);k(this,"albums");k(this,"audiobooks");k(this,"episodes");k(this,"playlists");k(this,"shows");k(this,"tracks");this.albums=new Ot(t),this.audiobooks=new Lt(t),this.episodes=new Vt(t),this.playlists=new Dt(t),this.shows=new Nt(t),this.tracks=new Bt(t)}profile(){return this.getRequest("me")}topItems(t,s,r,a){const l=this.paramsFor({time_range:s,limit:r,offset:a});return this.getRequest(`me/top/${t}${l}`)}followedArtists(t,s){const r=this.paramsFor({type:"artist",after:t,limit:s});return this.getRequest(`me/following${r}`)}async followArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.putRequest(`me/following${r}`,{ids:t})}async unfollowArtistsOrUsers(t,s){const r=this.paramsFor({type:s});await this.deleteRequest(`me/following${r}`,{ids:t})}followsArtistsOrUsers(t,s){const r=this.paramsFor({ids:t,type:s});return this.getRequest(`me/following/contains${r}`)}}class Ot extends O{savedAlbums(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/albums${r}`)}async saveAlbums(e){await this.putRequest("me/albums",e)}async removeSavedAlbums(e){await this.deleteRequest("me/albums",e)}hasSavedAlbums(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/albums/contains${t}`)}}class Lt extends O{savedAudiobooks(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/audiobooks${s}`)}async saveAudiobooks(e){await this.putRequest("me/audiobooks",e)}async removeSavedAudiobooks(e){await this.deleteRequest("me/audiobooks",e)}hasSavedAudiobooks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/audiobooks/contains${t}`)}}class Vt extends O{savedEpisodes(e,t,s){const r=this.paramsFor({market:e,limit:t,offset:s});return this.getRequest(`me/episodes${r}`)}async saveEpisodes(e){await this.putRequest("me/episodes",e)}async removeSavedEpisodes(e){await this.deleteRequest("me/episodes",e)}hasSavedEpisodes(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/episodes/contains${t}`)}}class Dt extends O{playlists(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/playlists${s}`)}async follow(e){await this.putRequest(`playlists/${e}/followers`)}async unfollow(e){await this.deleteRequest(`playlists/${e}/followers`)}isFollowing(e,t){const s=this.paramsFor({ids:t});return this.getRequest(`playlists/${e}/followers/contains${s}`)}}class Nt extends O{savedShows(e,t){const s=this.paramsFor({limit:e,offset:t});return this.getRequest(`me/shows${s}`)}saveShows(e){const t=this.paramsFor({ids:e});return this.putRequest(`me/shows${t}`)}removeSavedShows(e,t){const s=this.paramsFor({ids:e,market:t});return this.deleteRequest(`me/shows${s}`)}hasSavedShow(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/shows/contains${t}`)}}class Bt extends O{savedTracks(e,t,s){const r=this.paramsFor({limit:e,offset:t,market:s});return this.getRequest(`me/tracks${r}`)}async saveTracks(e){await this.putRequest("me/tracks",e)}async removeSavedTracks(e){await this.deleteRequest("me/tracks",e)}hasSavedTracks(e){const t=this.paramsFor({ids:e});return this.getRequest(`me/tracks/contains${t}`)}}class jt{static get current(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}class Y{static async refreshCachedAccessToken(e,t){const s=await Y.refreshToken(e,t.refresh_token);return Y.toCachable(s)}static toCachable(e){return{...e,expires:Date.now()+e.expires_in*1e3}}static async refreshToken(e,t){const s=new URLSearchParams;s.append("client_id",e),s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to refresh token: ${r.statusText}, ${a}`);return JSON.parse(a)}static generateCodeVerifier(e){let t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*s.length));return t}static async generateCodeChallenge(e){const t=new TextEncoder().encode(e),s=await jt.current.subtle.digest("SHA-256",t),r=[...new Uint8Array(s)];return(typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}static get crypto(){return this.hasSubtleCrypto?window.crypto:this.tryLoadNodeWebCrypto()}static get hasSubtleCrypto(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}static tryLoadNodeWebCrypto(){try{const{webcrypto:e}=require("crypto");return e}catch(e){throw e}}}const ye=class ye{constructor(e,t,s=[]){k(this,"clientId");k(this,"clientSecret");k(this,"scopes");k(this,"configuration",null);this.clientId=e,this.clientSecret=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ye.cacheKey,async()=>{const t=await this.getTokenFromApi();return Y.toCachable(t)})}async getAccessToken(){return await this.cache.get(ye.cacheKey)}removeAccessToken(){this.cache.remove(ye.cacheKey)}async getTokenFromApi(){const e={grant_type:"client_credentials",scope:this.scopes.join(" ")},t=Object.keys(e).map(o=>o+"="+e[o]).join("&"),s=typeof Buffer<"u",r=`${this.clientId}:${this.clientSecret}`,a=s?Buffer.from(r).toString("base64"):btoa(r),l=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${a}`},body:t});if(l.status!==200)throw new Error("Failed to get access token.");return await l.json()}};k(ye,"cacheKey","spotify-sdk:ClientCredentialsStrategy:token");let je=ye;const ve=class ve{constructor(e,t,s){k(this,"clientId");k(this,"redirectUri");k(this,"scopes");k(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ve.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return Y.toCachable(t)},async t=>Y.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ve.cacheKey)}removeAccessToken(){this.cache.remove(ve.cacheKey)}async redirectOrVerifyToken(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token");if(t)return Promise.resolve({access_token:t,token_type:e.get("token_type")??"",expires_in:parseInt(e.get("expires_in")??"0"),refresh_token:e.get("refresh_token")??"",expires:Number(e.get("expires"))||0});var r=(this.scopes??[]).join(" ");const a=new URLSearchParams;a.append("client_id",this.clientId),a.append("response_type","token"),a.append("redirect_uri",this.redirectUri),a.append("scope",r);const l="https://accounts.spotify.com/authorize?"+a.toString();return this.configuration.redirectionStrategy.redirect(l),Ge}};k(ve,"cacheKey","spotify-sdk:ImplicitGrantStrategy:token");let Me=ve;const ke=class ke{constructor(e,t,s){k(this,"clientId");k(this,"redirectUri");k(this,"scopes");k(this,"configuration",null);this.clientId=e,this.redirectUri=t,this.scopes=s}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return await this.cache.getOrCreate(ke.cacheKey,async()=>{const t=await this.redirectOrVerifyToken();return Y.toCachable(t)},async t=>Y.refreshCachedAccessToken(this.clientId,t))}async getAccessToken(){return await this.cache.get(ke.cacheKey)}removeAccessToken(){this.cache.remove(ke.cacheKey)}async redirectOrVerifyToken(){const t=new URLSearchParams(window.location.search).get("code");if(!t){const a=Y.generateCodeVerifier(128),l=await Y.generateCodeChallenge(a),h={verifier:a,expiresOnAccess:!0};this.cache.setCacheItem("spotify-sdk:verifier",h);const o=await this.generateRedirectUrlForUser(this.scopes,l);return await this.configuration.redirectionStrategy.redirect(o),Ge}this.removeCodeFromUrl();const s=await this.cache.get("spotify-sdk:verifier"),r=s==null?void 0:s.verifier;if(!r)throw new Error("No verifier found in cache - can't validate query string callback parameters.");return await this.configuration.redirectionStrategy.onReturnFromRedirect(),await this.exchangeCodeForToken(t,r)}removeCodeFromUrl(){const e=new URL(window.location.href);e.searchParams.delete("code");const t=e.search?e.href:e.href.replace("?","");window.history.replaceState({},document.title,t)}async generateRedirectUrlForUser(e,t){const s=e.join(" "),r=new URLSearchParams;return r.append("client_id",this.clientId),r.append("response_type","code"),r.append("redirect_uri",this.redirectUri),r.append("scope",s),r.append("code_challenge_method","S256"),r.append("code_challenge",t),`https://accounts.spotify.com/authorize?${r.toString()}`}async exchangeCodeForToken(e,t){const s=new URLSearchParams;s.append("client_id",this.clientId),s.append("grant_type","authorization_code"),s.append("code",e),s.append("redirect_uri",this.redirectUri),s.append("code_verifier",t);const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}),a=await r.text();if(!r.ok)throw new Error(`Failed to exchange code for token: ${r.statusText}, ${a}`);return JSON.parse(a)}};k(ke,"cacheKey","spotify-sdk:AuthorizationCodeWithPKCEStrategy:token");let Ve=ke;class Mt{async deserialize(e){const t=await e.text();return t.length>0?JSON.parse(t):null}}class Ht{async validateResponse(e){switch(e.status){case 401:throw new Error("Bad or expired token. This can happen if the user revoked a token or the access token has expired. You should re-authenticate the user.");case 403:const t=await e.text();throw new Error(`Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won't help here. Body: ${t}`);case 429:throw new Error("The app has exceeded its rate limits.");default:if(!e.status.toString().startsWith("20")){const s=await e.text();throw new Error(`Unrecognised response code: ${e.status} - ${e.statusText}. Body: ${s}`)}}}}class zt{async handleErrors(e){return!1}}class Gt{async redirect(e){document.location=e.toString()}async onReturnFromRedirect(){}}class ut{constructor(e,t=new Map,s=0,r=2*60*1e3){k(this,"storage");k(this,"updateFunctions");k(this,"autoRenewInterval");k(this,"autoRenewWindow");this.storage=e,this.updateFunctions=t,this.autoRenewInterval=s,this.autoRenewWindow=r,this.autoRenewInterval>0&&setInterval(()=>this.autoRenewRenewableItems(),this.autoRenewInterval)}async getOrCreate(e,t,s){s&&this.updateFunctions.set(e,s);const r=await this.get(e);if(r)return r;const a=await t();if(!a)throw new Error("Could not create cache item");return this.setCacheItem(e,a),a}async get(e){let t=this.storage.get(e),s=t?JSON.parse(t):null;if(this.itemDueToExpire(s)&&this.updateFunctions.has(e)){const r=this.updateFunctions.get(e);await this.tryUpdateItem(e,s,r),t=this.storage.get(e),s=t?JSON.parse(t):null}return s?s.expires&&(s.expires===-1||s.expires<=Date.now())?(this.remove(e),null):(s.expiresOnAccess&&s.expiresOnAccess===!0&&this.remove(e),s):null}set(e,t,s){const r=Date.now()+s,a={...t,expires:r};this.setCacheItem(e,a)}setCacheItem(e,t){const s=JSON.stringify(t);this.storage.set(e,s)}remove(e){this.storage.remove(e)}itemDueToExpire(e){return!e||!e.expires?!1:e.expires-Date.now()<this.autoRenewWindow}async autoRenewRenewableItems(){this.updateFunctions.forEach(async(e,t)=>{const s=await this.get(t);s&&e&&this.itemDueToExpire(s)&&await this.tryUpdateItem(t,s,e)})}async tryUpdateItem(e,t,s){try{const r=await s(t);r&&this.setCacheItem(e,r)}catch(r){console.error(r)}}}class Jt extends ut{constructor(){super(new Kt)}}class Kt{get(e){return localStorage.getItem(e)}set(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}}class Wt extends ut{constructor(){super(new Zt)}}class Zt{constructor(){k(this,"cache",new Map)}get(e){return this.cache.get(e)??null}set(e,t){this.cache.set(e,t)}remove(e){this.cache.delete(e)}}const _e=class _e{constructor(e,t){k(this,"clientId");k(this,"accessToken");k(this,"configuration",null);this.clientId=e,this.accessToken=t}get cache(){return this.configuration.cachingStrategy}setConfiguration(e){this.configuration=e}async getOrCreateAccessToken(){return this.accessToken=await this.cache.getOrCreate(_e.cacheKey,async()=>{const e=Y.toCachable(this.accessToken);return Promise.resolve(e)},async e=>Y.refreshCachedAccessToken(this.clientId,e)),this.accessToken}async getAccessToken(){return await this.cache.get(_e.cacheKey)}removeAccessToken(){this.cache.remove(_e.cacheKey)}};k(_e,"cacheKey","spotify-sdk:ProvidedAccessTokenStrategy:token");let He=_e;const oe=class oe{constructor(e,t){k(this,"sdkConfig");k(this,"authenticationStrategy");k(this,"albums");k(this,"artists");k(this,"audiobooks");k(this,"browse");k(this,"chapters");k(this,"episodes");k(this,"recommendations");k(this,"markets");k(this,"player");k(this,"playlists");k(this,"shows");k(this,"tracks");k(this,"users");k(this,"search");k(this,"currentUser");this.sdkConfig=this.initilizeSdk(t),this.albums=new _t(this),this.artists=new bt(this),this.audiobooks=new Ct(this),this.browse=new $t(this),this.chapters=new xt(this),this.episodes=new Rt(this),this.recommendations=new Tt(this),this.markets=new Et(this),this.player=new St(this),this.playlists=new qt(this),this.shows=new At(this),this.tracks=new Pt(this),this.users=new It(this),this.currentUser=new Ut(this);const s=new Ft(this);this.search=s.execute.bind(s),this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig)}async makeRequest(e,t,s=void 0,r=void 0){try{const a=await this.authenticationStrategy.getOrCreateAccessToken(),l=a==null?void 0:a.access_token,h=oe.rootUrl+t,o={method:e,headers:{Authorization:`Bearer ${l}`,"Content-Type":r??"application/json"},body:s?typeof s=="string"?s:JSON.stringify(s):void 0};this.sdkConfig.beforeRequest(h,o);const i=await this.sdkConfig.fetch(h,o);return this.sdkConfig.afterRequest(h,o,i),i.status===204?null:(await this.sdkConfig.responseValidator.validateResponse(i),this.sdkConfig.deserializer.deserialize(i))}catch(a){if(!await this.sdkConfig.errorHandler.handleErrors(a))throw a;return null}}initilizeSdk(e){const t=typeof window<"u";return{...{fetch:(r,a)=>fetch(r,a),beforeRequest:(r,a)=>{},afterRequest:(r,a,l)=>{},deserializer:new Mt,responseValidator:new Ht,errorHandler:new zt,redirectionStrategy:new Gt,cachingStrategy:t?new Jt:new Wt},...e}}switchAuthenticationStrategy(e){this.authenticationStrategy=e,this.authenticationStrategy.setConfiguration(this.sdkConfig),this.authenticationStrategy.getOrCreateAccessToken()}async authenticate(){return this.authenticationStrategy.getOrCreateAccessToken()}async getAccessToken(){return this.authenticationStrategy.getAccessToken()}logOut(){this.authenticationStrategy.removeAccessToken()}static withUserAuthorization(e,t,s=[],r){const a=new Ve(e,t,s);return new oe(a,r)}static withClientCredentials(e,t,s=[],r){const a=new je(e,t,s);return new oe(a,r)}static withImplicitGrant(e,t,s=[],r){const a=new Me(e,t,s);return new oe(a,r)}static withAccessToken(e,t,s){const r=new He(e,t);return new oe(r,s)}static async performUserAuthorization(e,t,s,r,a){const l=new Ve(e,t,s),o=await new oe(l,a).authenticationStrategy.getOrCreateAccessToken();if(JSON.stringify({...o,expires:0})!==JSON.stringify(Ge)){if(typeof r=="string"){await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return}await r(o)}}};k(oe,"rootUrl","https://api.spotify.com/v1/");let ze=oe;function Qt(n){let e,t,s;return t=new vt({props:{data:n[0],nodeStyle:n[2]}}),{c(){e=w("div"),fe(t.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var a=b(e);me(t.$$.fragment,a),a.forEach(v),this.h()},h(){d(e,"class","w-full h-full z-0")},m(r,a){G(r,e,a),ge(t,e,null),s=!0},p(r,a){const l={};a&1&&(l.data=r[0]),a&4&&(l.nodeStyle=r[2]),t.$set(l)},i(r){s||(j(t.$$.fragment,r),s=!0)},o(r){W(t.$$.fragment,r),s=!1},d(r){r&&v(e),we(t)}}}function Yt(n){let e,t,s,r=n[1].text+"",a,l,h,o,i,c;return{c(){e=w("div"),t=w("div"),s=w("p"),a=X(r),l=E(),h=w("progress"),this.h()},l(u){e=y(u,"DIV",{class:!0});var f=b(e);t=y(f,"DIV",{class:!0});var m=b(t);s=y(m,"P",{class:!0});var g=b(s);a=ee(g,r),g.forEach(v),l=S(m),h=y(m,"PROGRESS",{class:!0,max:!0}),b(h).forEach(v),m.forEach(v),f.forEach(v),this.h()},h(){d(s,"class","text-lg font-bold"),d(h,"class","progress w-56"),h.value=o=n[1].percentage,d(h,"max","100"),d(t,"class","text-center space-y-3"),d(e,"class","absolute top-0 left-0 z-10 w-screen h-screen flex justify-center items-center bg-base-100")},m(u,f){G(u,e,f),p(e,t),p(t,s),p(s,a),p(t,l),p(t,h),c=!0},p(u,f){(!c||f&2)&&r!==(r=u[1].text+"")&&pe(a,r),(!c||f&2&&o!==(o=u[1].percentage))&&(h.value=o)},i(u){c||(u&&ce(()=>{c&&(i||(i=re(e,ue,{delay:100,duration:500},!0)),i.run(1))}),c=!0)},o(u){u&&(i||(i=re(e,ue,{delay:100,duration:500},!1)),i.run(0)),c=!1},d(u){u&&v(e),u&&i&&i.end()}}}function Xt(n){let e,t,s,r;const a=[Yt,Qt],l=[];function h(o,i){return o[1]?0:1}return t=h(n),s=l[t]=a[t](n),{c(){e=w("div"),s.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var i=b(e);s.l(i),i.forEach(v),this.h()},h(){d(e,"class","relative")},m(o,i){G(o,e,i),l[t].m(e,null),r=!0},p(o,[i]){let c=t;t=h(o),t===c?l[t].p(o,i):(Se(),W(l[c],1,1,()=>{l[c]=null}),qe(),s=l[t],s?s.p(o,i):(s=l[t]=a[t](o),s.c()),j(s,1),s.m(e,null))},i(o){r||(j(s),r=!0)},o(o){W(s),r=!1},d(o){o&&v(e),l[t].d()}}}function es(n,e,t){let s,r,a,l;se(n,Ue,f=>t(4,s=f)),se(n,Ze,f=>t(0,r=f)),se(n,$e,f=>t(1,a=f)),se(n,De,f=>t(2,l=f));let{sdk:h}=e;const o=async f=>{const m=f.map(x=>x.id),g=80/m.length;let _=[];for(const x of f){const A=await h.artists.relatedArtists(x.id);a&&le($e,a.percentage+=g,a);for(const L of A.artists)m.includes(L.id)&&!_.includes({source:L.id,target:x.id})&&!_.includes({source:x.id,target:L.id})&&_.push({source:x.id,target:L.id})}return _},i=async f=>{var g,_;const m=(await h.currentUser.followedArtists(f,50)).artists;return(g=m==null?void 0:m.cursors)!=null&&g.after?m.items.concat(await i((_=m==null?void 0:m.cursors)==null?void 0:_.after)):m.items},c=async(f="short")=>{switch(f){case"short_term":case"medium_term":case"long_term":return(await h.currentUser.topItems("artists",f,50)).items;case"following":return await i();case"all":return(await c("short_term")).concat(await c("medium_term")).concat(await c("long_term")).concat(await c("following"));default:return c("medium_term")}},u=async f=>{try{le($e,a={text:"Downloading Artists",percentage:10},a);const m=await c(f);le($e,a={text:"Building Links",percentage:20},a);const g=await o(m);le($e,a=null,a),le(Ze,r={nodes:m,links:g},r)}catch(m){le(Ue,s=m,s)}};return Oe.subscribe(u),n.$$set=f=>{"sdk"in f&&t(3,h=f.sdk)},[r,a,l,h]}class ts extends Fe{constructor(e){super(),Ae(this,e,es,Xt,Ee,{sdk:3})}}function ss(n){let e,t=n[0].display_name+"",s;return{c(){e=w("span"),s=X(t)},l(r){e=y(r,"SPAN",{});var a=b(e);s=ee(a,t),a.forEach(v)},m(r,a){G(r,e,a),p(e,s)},p(r,a){a&1&&t!==(t=r[0].display_name+"")&&pe(s,t)},d(r){r&&v(e)}}}function rs(n){let e,t;return{c(){e=w("img"),this.h()},l(s){e=y(s,"IMG",{src:!0,alt:!0}),this.h()},h(){var s;Je(e.src,t=(s=n[0].images)==null?void 0:s.slice(-1)[0].url)||d(e,"src",t),d(e,"alt","profile")},m(s,r){G(s,e,r)},p(s,r){var a;r&1&&!Je(e.src,t=(a=s[0].images)==null?void 0:a.slice(-1)[0].url)&&d(e,"src",t)},d(s){s&&v(e)}}}function as(n){let e,t,s,r,a,l,h;function o(u,f){var m,g;return((g=(m=u[0])==null?void 0:m.images)==null?void 0:g.length)>0?rs:ss}let i=o(n),c=i(n);return{c(){e=w("div"),t=w("div"),s=w("a"),c.c(),this.h()},l(u){e=y(u,"DIV",{class:!0,"data-tip":!0});var f=b(e);t=y(f,"DIV",{class:!0});var m=b(t);s=y(m,"A",{class:!0,href:!0,target:!0,rel:!0});var g=b(s);c.l(g),g.forEach(v),m.forEach(v),f.forEach(v),this.h()},h(){d(s,"class","w-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2 overflow-hidden"),d(s,"href",r=n[0].external_urls.spotify),d(s,"target","_blank"),d(s,"rel","noreferrer noopener"),d(t,"class","avatar"),d(e,"class","tooltip tooltip-bottom select-none"),d(e,"data-tip",a=n[0].display_name)},m(u,f){G(u,e,f),p(e,t),p(t,s),c.m(s,null),h=!0},p(u,[f]){i===(i=o(u))&&c?c.p(u,f):(c.d(1),c=i(u),c&&(c.c(),c.m(s,null))),(!h||f&1&&r!==(r=u[0].external_urls.spotify))&&d(s,"href",r),(!h||f&1&&a!==(a=u[0].display_name))&&d(e,"data-tip",a)},i(u){h||(u&&ce(()=>{h&&(l||(l=re(e,ue,{duration:400},!0)),l.run(1))}),h=!0)},o(u){u&&(l||(l=re(e,ue,{duration:400},!1)),l.run(0)),h=!1},d(u){u&&v(e),c.d(),u&&l&&l.end()}}}function ns(n,e,t){let{profile:s}=e;return n.$$set=r=>{"profile"in r&&t(0,s=r.profile)},[s]}class os extends Fe{constructor(e){super(),Ae(this,e,ns,as,Ee,{profile:0})}}function Xe(n){let e,t,s,r,a="Color by Popularity",l,h,o,i,c,u,f,m=n[3]&&et();return{c(){e=w("div"),t=w("div"),s=w("label"),r=w("span"),r.textContent=a,l=E(),h=w("input"),o=E(),m&&m.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var _=b(e);t=y(_,"DIV",{class:!0});var x=b(t);s=y(x,"LABEL",{class:!0});var A=b(s);r=y(A,"SPAN",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1w1k44k"&&(r.textContent=a),l=S(A),h=y(A,"INPUT",{type:!0,class:!0}),A.forEach(v),x.forEach(v),o=S(_),m&&m.l(_),_.forEach(v),this.h()},h(){d(r,"class","label-text"),d(h,"type","checkbox"),d(h,"class","checkbox"),d(s,"class","label cursor-pointer"),d(t,"class","form-control"),d(e,"class","flex flex-col")},m(g,_){G(g,e,_),p(e,t),p(t,s),p(s,r),p(s,l),p(s,h),h.checked=n[3],p(e,o),m&&m.m(e,null),c=!0,u||(f=Te(h,"change",n[6]),u=!0)},p(g,_){_&8&&(h.checked=g[3]),g[3]?m?_&8&&j(m,1):(m=et(),m.c(),j(m,1),m.m(e,null)):m&&(Se(),W(m,1,1,()=>{m=null}),qe())},i(g){c||(j(m),g&&ce(()=>{c&&(i||(i=re(e,ue,{},!0)),i.run(1))}),c=!0)},o(g){W(m),g&&(i||(i=re(e,ue,{},!1)),i.run(0)),c=!1},d(g){g&&v(e),m&&m.d(),g&&i&&i.end(),u=!1,f()}}}function et(n){let e,t='<p class="text-left">Less Popular</p> <p class="text-right">More Popular</p>',s,r;return{c(){e=w("div"),e.innerHTML=t,this.h()},l(a){e=y(a,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-17ane3m"&&(e.innerHTML=t),this.h()},h(){d(e,"class","inline-grid mx-1 flex-grow grid-cols-2 px-3 py-1 text-xs md:text-base text-white rounded-md shadow-md bg-gradient-to-r from-[#15803d] via-[#7e22ce] to-[#be185d]")},m(a,l){G(a,e,l),r=!0},i(a){r||(a&&ce(()=>{r&&(s||(s=re(e,Ne,{y:-4},!0)),s.run(1))}),r=!0)},o(a){a&&(s||(s=re(e,Ne,{y:-4},!1)),s.run(0)),r=!1},d(a){a&&v(e),a&&s&&s.end()}}}function is(n){let e,t,s,r,a,l="Preferences",h,o,i,c="Top of The Past Month",u,f="Top of The Past Year",m,g="Top of All Time",_,x="Following",A,L="All Available",V,U,R,T="View as Dots",C,M="View as Pictures",q,P="View as Names",Q,Z,I,J,D,N="Log Out",ae,te,be='<i>© 2023 Grant Handy · <a href="/LICENSE.txt" class="link" target="_blank" rel="noreferrer noopener">License</a></i>',de,Ce,F=n[2]!=xe.Picture&&Xe(n);return{c(){e=w("div"),t=w("label"),s=E(),r=w("div"),a=w("h1"),a.textContent=l,h=E(),o=w("select"),i=w("option"),i.textContent=c,u=w("option"),u.textContent=f,m=w("option"),m.textContent=g,_=w("option"),_.textContent=x,A=w("option"),A.textContent=L,V=E(),U=w("select"),R=w("option"),R.textContent=T,C=w("option"),C.textContent=M,q=w("option"),q.textContent=P,Q=E(),F&&F.c(),Z=E(),I=w("div"),J=E(),D=w("button"),D.textContent=N,ae=E(),te=w("p"),te.innerHTML=be,this.h()},l(H){e=y(H,"DIV",{class:!0});var K=b(e);t=y(K,"LABEL",{for:!0,class:!0}),b(t).forEach(v),s=S(K),r=y(K,"DIV",{class:!0});var B=b(r);a=y(B,"H1",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-n7an2l"&&(a.textContent=l),h=S(B),o=y(B,"SELECT",{class:!0});var ne=b(o);i=y(ne,"OPTION",{"data-svelte-h":!0}),z(i)!=="svelte-18ovyn3"&&(i.textContent=c),u=y(ne,"OPTION",{"data-svelte-h":!0}),z(u)!=="svelte-1s4lgcp"&&(u.textContent=f),m=y(ne,"OPTION",{"data-svelte-h":!0}),z(m)!=="svelte-t59ye6"&&(m.textContent=g),_=y(ne,"OPTION",{"data-svelte-h":!0}),z(_)!=="svelte-1utbkqg"&&(_.textContent=x),A=y(ne,"OPTION",{"data-svelte-h":!0}),z(A)!=="svelte-1p6vrpt"&&(A.textContent=L),ne.forEach(v),V=S(B),U=y(B,"SELECT",{class:!0});var he=b(U);R=y(he,"OPTION",{"data-svelte-h":!0}),z(R)!=="svelte-1ru6mvb"&&(R.textContent=T),C=y(he,"OPTION",{"data-svelte-h":!0}),z(C)!=="svelte-hpqvnh"&&(C.textContent=M),q=y(he,"OPTION",{"data-svelte-h":!0}),z(q)!=="svelte-1arngzx"&&(q.textContent=P),he.forEach(v),Q=S(B),F&&F.l(B),Z=S(B),I=y(B,"DIV",{class:!0}),b(I).forEach(v),J=S(B),D=y(B,"BUTTON",{class:!0,"data-svelte-h":!0}),z(D)!=="svelte-11tytfz"&&(D.textContent=N),ae=S(B),te=y(B,"P",{class:!0,"data-svelte-h":!0}),z(te)!=="svelte-g4e2e5"&&(te.innerHTML=be),B.forEach(v),K.forEach(v),this.h()},h(){d(t,"for","my-drawer"),d(t,"class","drawer-overlay"),d(a,"class","text-xl"),i.__value=Re.ShortTerm,ie(i,i.__value),u.__value=Re.MediumTerm,ie(u,u.__value),m.__value=Re.LongTerm,ie(m,m.__value),_.__value=Re.Following,ie(_,_.__value),A.__value=Re.All,ie(A,A.__value),d(o,"class","select select-bordered w-full"),n[1]===void 0&&ce(()=>n[4].call(o)),R.__value=xe.Dot,ie(R,R.__value),C.__value=xe.Picture,ie(C,C.__value),q.__value=xe.Text,ie(q,q.__value),d(U,"class","select select-bordered w-full"),n[2]===void 0&&ce(()=>n[5].call(U)),d(I,"class","flex-grow"),d(D,"class","btn btn-primary"),d(te,"class","text-xs text-center"),d(r,"class","menu p-4 w-64 md:w-80 h-full bg-base-200 text-base-content space-y-2 flex flex-col bg-secondary-content"),d(e,"class","drawer-side z-50")},m(H,K){G(H,e,K),p(e,t),p(e,s),p(e,r),p(r,a),p(r,h),p(r,o),p(o,i),p(o,u),p(o,m),p(o,_),p(o,A),Ie(o,n[1],!0),p(r,V),p(r,U),p(U,R),p(U,C),p(U,q),Ie(U,n[2],!0),p(r,Q),F&&F.m(r,null),p(r,Z),p(r,I),p(r,J),p(r,D),p(r,ae),p(r,te),de||(Ce=[Te(o,"change",n[4]),Te(U,"change",n[5]),Te(D,"click",n[7])],de=!0)},p(H,[K]){K&2&&Ie(o,H[1]),K&4&&Ie(U,H[2]),H[2]!=xe.Picture?F?(F.p(H,K),K&4&&j(F,1)):(F=Xe(H),F.c(),j(F,1),F.m(r,Z)):F&&(Se(),W(F,1,1,()=>{F=null}),qe())},i(H){j(F)},o(H){W(F)},d(H){H&&v(e),F&&F.d(),de=!1,gt(Ce)}}}function ls(n,e,t){let s,r,a;se(n,Oe,u=>t(1,s=u)),se(n,De,u=>t(2,r=u)),se(n,Qe,u=>t(3,a=u));let{sdk:l}=e;function h(){s=Ke(this),Oe.set(s)}function o(){r=Ke(this),De.set(r)}function i(){a=this.checked,Qe.set(a)}const c=()=>{l.logOut(),localStorage.clear(),window.location.href="/"};return n.$$set=u=>{"sdk"in u&&t(0,l=u.sdk)},[l,s,r,a,h,o,i,c]}class cs extends Fe{constructor(e){super(),Ae(this,e,ls,is,Ee,{sdk:0})}}function tt(n,e,t){const s=n.slice();return s[6]=e[t],s}function st(n,e,t){const s=n.slice();return s[9]=e[t],s}function rt(n){let e,t,s,r,a,l,h,o=n[0].name+"",i,c,u,f,m,g,_,x,A,L,V,U,R=n[0].popularity+"",T,C,M,q,P,Q,Z,I=n[0].genres.length>0&&at(n),J={ctx:n,current:null,token:null,hasCatch:!1,pending:ps,then:hs,catch:us,value:5};return Be(x=n[1](n[0]),J),{c(){e=w("div"),t=w("input"),s=E(),r=w("div"),a=w("div"),l=w("div"),h=w("h2"),i=X(o),u=E(),f=w("div"),m=w("div"),g=w("div"),I&&I.c(),_=E(),J.block.c(),A=E(),L=w("div"),V=w("p"),U=X("Popularity: "),T=X(R),C=X("%"),M=E(),q=w("p"),P=w("a"),Q=X("Visit"),this.h()},l(D){e=y(D,"DIV",{class:!0});var N=b(e);t=y(N,"INPUT",{type:!0}),s=S(N),r=y(N,"DIV",{class:!0});var ae=b(r);a=y(ae,"DIV",{class:!0,style:!0});var te=b(a);l=y(te,"DIV",{class:!0});var be=b(l);h=y(be,"H2",{class:!0});var de=b(h);i=ee(de,o),de.forEach(v),be.forEach(v),te.forEach(v),ae.forEach(v),u=S(N),f=y(N,"DIV",{class:!0});var Ce=b(f);m=y(Ce,"DIV",{class:!0});var F=b(m);g=y(F,"DIV",{class:!0});var H=b(g);I&&I.l(H),_=S(H),J.block.l(H),H.forEach(v),A=S(F),L=y(F,"DIV",{class:!0});var K=b(L);V=y(K,"P",{class:!0});var B=b(V);U=ee(B,"Popularity: "),T=ee(B,R),C=ee(B,"%"),B.forEach(v),M=S(K),q=y(K,"P",{class:!0});var ne=b(q);P=y(ne,"A",{href:!0,class:!0,target:!0,rel:!0});var he=b(P);Q=ee(he,"Visit"),he.forEach(v),ne.forEach(v),K.forEach(v),F.forEach(v),Ce.forEach(v),N.forEach(v),this.h()},h(){var D;d(t,"type","checkbox"),d(h,"class","card-title text-left"),d(l,"class","backdrop-brightness-50 p-4 w-full space-y-2 flex items-center"),d(a,"class","rounded-t-xl w-full text-white bg-cover bg-center"),d(a,"style",c=`background-image: url(${(D=n[0].images[0])==null?void 0:D.url})`),d(r,"class","collapse-title p-0"),d(g,"class","space-y-2"),d(V,"class","text-left float-left"),d(P,"href",Z=n[0].external_urls.spotify),d(P,"class","link"),d(P,"target","_blank"),d(P,"rel","noreferrer noopener"),d(q,"class","text-right float-right"),d(L,"class","w-full flow-root"),d(m,"class","pt-3 text-xs md:text-sm space-y-3"),d(f,"class","collapse-content"),d(e,"class","z-20 absolute top-4 left-4 w-48 md:w-64 collapse shadow-2xl rounded-xl bg-neutral text-neutral-content")},m(D,N){G(D,e,N),p(e,t),p(e,s),p(e,r),p(r,a),p(a,l),p(l,h),p(h,i),p(e,u),p(e,f),p(f,m),p(m,g),I&&I.m(g,null),p(g,_),J.block.m(g,J.anchor=null),J.mount=()=>g,J.anchor=null,p(m,A),p(m,L),p(L,V),p(V,U),p(V,T),p(V,C),p(L,M),p(L,q),p(q,P),p(P,Q)},p(D,N){var ae;n=D,N&1&&o!==(o=n[0].name+"")&&pe(i,o),N&1&&c!==(c=`background-image: url(${(ae=n[0].images[0])==null?void 0:ae.url})`)&&d(a,"style",c),n[0].genres.length>0?I?I.p(n,N):(I=at(n),I.c(),I.m(g,_)):I&&(I.d(1),I=null),J.ctx=n,N&1&&x!==(x=n[1](n[0]))&&Be(x,J)||ct(J,n,N),N&1&&R!==(R=n[0].popularity+"")&&pe(T,R),N&1&&Z!==(Z=n[0].external_urls.spotify)&&d(P,"href",Z)},d(D){D&&v(e),I&&I.d(),J.block.d(),J.token=null,J=null}}}function at(n){let e,t,s="Genres",r,a,l=Le(n[0].genres.slice(0,8)),h=[];for(let o=0;o<l.length;o+=1)h[o]=nt(st(n,l,o));return{c(){e=w("div"),t=w("h3"),t.textContent=s,r=E(),a=w("ol");for(let o=0;o<h.length;o+=1)h[o].c();this.h()},l(o){e=y(o,"DIV",{});var i=b(e);t=y(i,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1epgqft"&&(t.textContent=s),r=S(i),a=y(i,"OL",{class:!0});var c=b(a);for(let u=0;u<h.length;u+=1)h[u].l(c);c.forEach(v),i.forEach(v),this.h()},h(){d(t,"class","text-sm md:text-lg font-semibold ml-1"),d(a,"class","list-disc ml-3")},m(o,i){G(o,e,i),p(e,t),p(e,r),p(e,a);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(a,null)},p(o,i){if(i&1){l=Le(o[0].genres.slice(0,8));let c;for(c=0;c<l.length;c+=1){const u=st(o,l,c);h[c]?h[c].p(u,i):(h[c]=nt(u),h[c].c(),h[c].m(a,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=l.length}},d(o){o&&v(e),lt(h,o)}}}function nt(n){let e,t=n[9]+"",s;return{c(){e=w("li"),s=X(t)},l(r){e=y(r,"LI",{});var a=b(e);s=ee(a,t),a.forEach(v)},m(r,a){G(r,e,a),p(e,s)},p(r,a){a&1&&t!==(t=r[9]+"")&&pe(s,t)},d(r){r&&v(e)}}}function us(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function hs(n){let e,t,s="Top Tracks",r,a,l,h=Le(n[5]),o=[];for(let i=0;i<h.length;i+=1)o[i]=ot(tt(n,h,i));return{c(){e=w("div"),t=w("h3"),t.textContent=s,r=E(),a=w("ol");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=y(i,"DIV",{});var c=b(e);t=y(c,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1fltes8"&&(t.textContent=s),r=S(c),a=y(c,"OL",{class:!0});var u=b(a);for(let f=0;f<o.length;f+=1)o[f].l(u);u.forEach(v),c.forEach(v),this.h()},h(){d(t,"class","text-sm md:text-lg font-semibold ml-1"),d(a,"class","list-decimal ml-3")},m(i,c){G(i,e,c),p(e,t),p(e,r),p(e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(a,null)},p(i,c){if(c&3){h=Le(i[5]);let u;for(u=0;u<h.length;u+=1){const f=tt(i,h,u);o[u]?o[u].p(f,c):(o[u]=ot(f),o[u].c(),o[u].m(a,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=h.length}},i(i){i&&(l||ce(()=>{l=wt(e,Ne,{y:-2}),l.start()}))},o:$,d(i){i&&v(e),lt(o,i)}}}function ot(n){let e,t,s=n[6].name+"",r,a,l,h;return{c(){e=w("li"),t=w("a"),r=X(s),a=X(" ►"),h=E(),this.h()},l(o){e=y(o,"LI",{class:!0});var i=b(e);t=y(i,"A",{href:!0,target:!0,rel:!0});var c=b(t);r=ee(c,s),a=ee(c," ►"),c.forEach(v),h=S(i),i.forEach(v),this.h()},h(){d(t,"href",l=n[6].external_urls.spotify),d(t,"target","_blank"),d(t,"rel","noreferrer noopener"),d(e,"class","link")},m(o,i){G(o,e,i),p(e,t),p(t,r),p(t,a),p(e,h)},p(o,i){i&1&&s!==(s=o[6].name+"")&&pe(r,s),i&1&&l!==(l=o[6].external_urls.spotify)&&d(t,"href",l)},d(o){o&&v(e)}}}function ps(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function ds(n){let e,t=n[0]&&rt(n);return{c(){t&&t.c(),e=We()},l(s){t&&t.l(s),e=We()},m(s,r){t&&t.m(s,r),G(s,e,r)},p(s,[r]){s[0]?t?t.p(s,r):(t=rt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(s){s&&v(e),t&&t.d(s)}}}function fs(n,e,t){let s,r;se(n,Ye,o=>t(0,s=o)),se(n,Oe,o=>t(3,r=o));let{sdk:a}=e,l=[];const h=async o=>{if(l.filter(i=>i.id===o.id).length>0)return l.filter(i=>i.id===o.id)[0].top;{const i=await a.artists.topTracks(o.id,"US").then(c=>c.tracks);return l.push({id:o.id,top:i}),i}};return n.$$set=o=>{"sdk"in o&&t(2,a=o.sdk)},n.$$.update=()=>{n.$$.dirty&8&&r&&le(Ye,s=null,s)},[s,h,a,r]}class ms extends Fe{constructor(e){super(),Ae(this,e,fs,ds,Ee,{sdk:2})}}function gs(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function ws(n){let e,t;return e=new os({props:{profile:n[3]}}),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,r){ge(e,s,r),t=!0},p:$,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function ys(n){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function it(n){let e,t,s,r="Error:",a,l,h,o,i='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',c,u,f,m;return{c(){e=w("div"),t=w("span"),s=w("span"),s.textContent=r,a=E(),l=X(n[0]),h=E(),o=w("button"),o.innerHTML=i,this.h()},l(g){e=y(g,"DIV",{class:!0});var _=b(e);t=y(_,"SPAN",{class:!0});var x=b(t);s=y(x,"SPAN",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-13bpzm2"&&(s.textContent=r),a=S(x),l=ee(x,n[0]),x.forEach(v),h=S(_),o=y(_,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-x9j6qp"&&(o.innerHTML=i),_.forEach(v),this.h()},h(){d(s,"class","font-bold"),d(t,"class","float-left"),d(o,"class","float-right"),d(e,"class","alert alert-error flow-root space-x-3")},m(g,_){G(g,e,_),p(e,t),p(t,s),p(t,a),p(t,l),p(e,h),p(e,o),u=!0,f||(m=Te(o,"click",n[2]),f=!0)},p(g,_){(!u||_&1)&&pe(l,g[0])},i(g){u||(g&&ce(()=>{u&&(c||(c=re(e,ue,{duration:200},!0)),c.run(1))}),u=!0)},o(g){g&&(c||(c=re(e,ue,{duration:200},!1)),c.run(0)),u=!1},d(g){g&&v(e),g&&c&&c.end(),f=!1,m()}}}function vs(n){let e,t,s,r,a,l,h,o,i,c,u,f,m,g,_,x,A='<input type="checkbox" class="drawer-toggle"/> <svg class="swap-off fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path></svg> <svg class="swap-on fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"></polygon></svg>',L,V,U;l=new ts({props:{sdk:n[1]}}),o=new ms({props:{sdk:n[1]}});let R={ctx:n,current:null,token:null,hasCatch:!1,pending:ys,then:ws,catch:gs,value:3,blocks:[,,,]};Be(n[1].currentUser.profile(),R),f=new kt({});let T=n[0]&&it(n);return V=new cs({props:{sdk:n[1]}}),{c(){e=E(),t=w("div"),s=w("input"),r=E(),a=w("div"),fe(l.$$.fragment),h=E(),fe(o.$$.fragment),i=E(),c=w("div"),R.block.c(),u=E(),fe(f.$$.fragment),m=E(),g=w("div"),T&&T.c(),_=E(),x=w("label"),x.innerHTML=A,L=E(),fe(V.$$.fragment),this.h()},l(C){yt("svelte-ijsdg2",document.head).forEach(v),e=S(C),t=y(C,"DIV",{class:!0});var q=b(t);s=y(q,"INPUT",{id:!0,type:!0,class:!0}),r=S(q),a=y(q,"DIV",{class:!0});var P=b(a);me(l.$$.fragment,P),h=S(P),me(o.$$.fragment,P),i=S(P),c=y(P,"DIV",{class:!0});var Q=b(c);R.block.l(Q),u=S(Q),me(f.$$.fragment,Q),Q.forEach(v),m=S(P),g=y(P,"DIV",{class:!0});var Z=b(g);T&&T.l(Z),_=S(Z),x=y(Z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),z(x)!=="svelte-3obcrk"&&(x.innerHTML=A),Z.forEach(v),P.forEach(v),L=S(q),me(V.$$.fragment,q),q.forEach(v),this.h()},h(){document.title="Artist Constellations - Dashboard",d(s,"id","my-drawer"),d(s,"type","checkbox"),d(s,"class","drawer-toggle"),d(c,"class","z-20 absolute top-0 right-0 pt-4 pr-4 flex flex-col items-end space-y-3"),d(x,"class","btn btn-circle btn-primary swap swap-rotate"),d(x,"for","my-drawer"),d(g,"class","z-20 absolute bottom-0 right-0 pr-4 pb-4 flex flex-col items-end space-y-3"),d(a,"class","drawer-content relative"),d(t,"class","drawer w-screen h-screen")},m(C,M){G(C,e,M),G(C,t,M),p(t,s),p(t,r),p(t,a),ge(l,a,null),p(a,h),ge(o,a,null),p(a,i),p(a,c),R.block.m(c,R.anchor=null),R.mount=()=>c,R.anchor=u,p(c,u),ge(f,c,null),p(a,m),p(a,g),T&&T.m(g,null),p(g,_),p(g,x),p(t,L),ge(V,t,null),U=!0},p(C,[M]){n=C,ct(R,n,M),n[0]?T?(T.p(n,M),M&1&&j(T,1)):(T=it(n),T.c(),j(T,1),T.m(g,_)):T&&(Se(),W(T,1,1,()=>{T=null}),qe())},i(C){U||(j(l.$$.fragment,C),j(o.$$.fragment,C),j(R.block),j(f.$$.fragment,C),j(T),j(V.$$.fragment,C),U=!0)},o(C){W(l.$$.fragment,C),W(o.$$.fragment,C);for(let M=0;M<3;M+=1){const q=R.blocks[M];W(q)}W(f.$$.fragment,C),W(T),W(V.$$.fragment,C),U=!1},d(C){C&&(v(e),v(t)),we(l),we(o),R.block.d(),R.token=null,R=null,we(f),T&&T.d(),we(V)}}}function ks(n,e,t){let s;se(n,Ue,l=>t(0,s=l));const r=ze.withUserAuthorization("2ed0e6e8b06842fb854cb15e1690a7b5",window.location.origin+"/dashboard",["user-follow-read","user-top-read"]);return[s,r,()=>le(Ue,s=null,s)]}class xs extends Fe{constructor(e){super(),Ae(this,e,ks,vs,Ee,{})}}export{xs as component};
